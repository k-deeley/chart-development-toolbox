<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>TernaryChart</title>
<meta name="generator" content="MATLAB 25.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2025-01-11">
<meta name="DC.source" content="TernaryChart.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<pre class="codeinput">
<span class="keyword">classdef</span> TernaryChart &lt; Component
    <span class="comment">%TERNARYCHART Chart managing a barycentric plot of three variables</span>
    <span class="comment">%which sum to a constant.</span>

    <span class="comment">% Copyright 2018-2025 The MathWorks, Inc.</span>

    <span class="keyword">properties</span> ( Dependent )
        <span class="comment">% Table of data: columns 1-3 are inputs and column 4 is the output.</span>
        Data<span class="typesection">(:, 4) table {mustBeTernaryData}</span>
        <span class="comment">% Resolution of the grid.</span>
        GridResolution<span class="typesection">(1, 1) double {mustBePositive, mustBeInteger}</span>
        <span class="comment">% Tick rate.</span>
        TickRate<span class="typesection">(1, 1) double {mustBePositive, mustBeInteger}</span>
        <span class="comment">% Direction of the ternary plot.</span>
        Direction<span class="typesection">(1, 1) string {mustBeMember( Direction, </span><span class="keyword">...</span>
            <span class="typesection">["clockwise", "counterclockwise"] )}</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Dependent )</span>

    <span class="keyword">properties</span> ( Dependent )
        <span class="comment">% Scatter series marker.</span>
        Marker<span class="typesection">(1, 1) string {mustBeMarker}</span> = <span class="string">"."</span>
        <span class="comment">% Scatter series marker size.</span>
        MarkerSize<span class="typesection">(1, 1) double {mustBePositive, mustBeFinite}</span> = 36
        <span class="comment">% Scatter series marker edge color.</span>
        MarkerEdgeColor = <span class="string">"flat"</span>
        <span class="comment">% Scatter series marker face color.</span>
        MarkerFaceColor = <span class="string">"none"</span>
        <span class="comment">% Surface face color.</span>
        FaceColor = <span class="string">"flat"</span>
        <span class="comment">% Surface edge color.</span>
        EdgeColor = [0, 0, 0]
        <span class="comment">% Surface face alpha.</span>
        FaceAlpha<span class="typesection">(1, 1) double {mustBeInRange( FaceAlpha, 0, 1 )}</span> = 1
        <span class="comment">% Surface edge alpha.</span>
        EdgeAlpha<span class="typesection">(1, 1) double {mustBeInRange( EdgeAlpha, 0, 1 )}</span> = 1
        <span class="comment">% Surface line style.</span>
        LineStyle<span class="typesection">(1, 1) string {mustBeLineStyle}</span> = <span class="string">"-"</span>
        <span class="comment">% Surface line width.</span>
        LineWidth<span class="typesection">(1, 1) double {mustBePositive, mustBeFinite}</span> = 0.5
        <span class="comment">% Surface face lighting.</span>
        FaceLighting<span class="typesection">(1, 1) string {mustBeLighting}</span> = <span class="string">"flat"</span>
        <span class="comment">% Surface edge lighting.</span>
        EdgeLighting<span class="typesection">(1, 1) string {mustBeLighting}</span> = <span class="string">"none"</span>
        <span class="comment">% Tick visibility.</span>
        ShowTicks<span class="typesection">(1, 1) matlab.lang.OnOffSwitchState </span>= <span class="string">"on"</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Dependent )</span>

    <span class="keyword">properties</span> ( Dependent )
        <span class="comment">% Axis line width.</span>
        AxisLineWidth<span class="typesection">(1, 1) double {mustBePositive, mustBeFinite}</span>
        <span class="comment">% Grid visibility.</span>
        GridVisible<span class="typesection">(1, 1) matlab.lang.OnOffSwitchState</span>
        <span class="comment">% Grid line width.</span>
        GridLineWidth<span class="typesection">(1, 1) double {mustBePositive, mustBeFinite}</span>
        <span class="comment">% Scatter series visibility.</span>
        ScatterVisible<span class="typesection">(1, 1) matlab.lang.OnOffSwitchState</span>
        <span class="comment">% Colorbar visibility.</span>
        ColorbarVisible<span class="typesection">(1, 1) matlab.lang.OnOffSwitchState</span>
        <span class="comment">% Visibility of the chart controls.</span>
        Controls<span class="typesection">(1, 1) matlab.lang.OnOffSwitchState</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Dependent )</span>

    <span class="keyword">properties</span> ( Dependent, AbortSet )
        <span class="comment">% Surface type.</span>
        SurfaceType<span class="typesection">(1, 1) string {mustBeMember( SurfaceType, </span><span class="keyword">...</span>
            <span class="typesection">["surface", "mesh"] )}</span>
        <span class="comment">% Surface interpolation method.</span>
        InterpolationMethod<span class="typesection">(1, 1) string </span><span class="keyword">...</span>
            <span class="typesection">{mustBeMember( InterpolationMethod, </span><span class="keyword">...</span>
            <span class="typesection">["linear", "nearest", "natural", "cubic", "v4"] )}</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Dependent, AbortSet )</span>

    <span class="keyword">properties</span> ( Access = private )
        <span class="comment">% Internal storage for the data property.</span>
        Data_<span class="typesection">(:, 4) table {mustBeTernaryData}</span> = defaultTernaryData()
        <span class="comment">% Internal storage for the grid resolution.</span>
        GridResolution_<span class="typesection">(1, 1) double {mustBePositive, mustBeInteger}</span> = 10
        <span class="comment">% Internal storage for the tick rate.</span>
        TickRate_<span class="typesection">(1, 1) double {mustBePositive, mustBeInteger}</span> = 1
        <span class="comment">% Internal storage for the SurfaceType property.</span>
        SurfaceType_<span class="typesection">(1, 1) string {mustBeMember( SurfaceType_, </span><span class="keyword">...</span>
            <span class="typesection">["surface", "mesh"] )}</span> = <span class="string">"surface"</span>
        <span class="comment">% Internal storage for Ternary direction.</span>
        Direction_<span class="typesection">(1, 1) string {mustBeMember( Direction_, </span><span class="keyword">...</span>
            <span class="typesection">["clockwise", "counterclockwise"] )}</span> = <span class="string">"clockwise"</span>
        <span class="comment">% Internal storage for the interpolation method.</span>
        InterpolationMethod_<span class="typesection">(1, 1) string </span><span class="keyword">...</span>
            <span class="typesection">{mustBeMember( InterpolationMethod_, </span><span class="keyword">...</span>
            <span class="typesection">["linear", "nearest", "natural", "cubic", "v4"] )}</span> = <span class="string">"v4"</span>
        <span class="comment">% Logical scalar specifying whether a computation is required.</span>
        ComputationRequired<span class="typesection">(1, 1) logical </span>= false
        <span class="comment">% Internal storage to record resolution modification.</span>
        ResolutionModified<span class="typesection">(1, 1) logical </span>= false
    <span class="keyword">end</span> <span class="comment">% properties ( Access = private )</span>

    <span class="keyword">properties</span> ( Access = private, Transient, NonCopyable )
        <span class="comment">% Chart layout.</span>
        LayoutGrid<span class="typesection">(:, 1) matlab.ui.container.GridLayout </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Chart axes.</span>
        Axes<span class="typesection">(:, 1) matlab.graphics.axis.Axes {mustBeScalarOrEmpty}</span>
        <span class="comment">% Triangular axes boundary.</span>
        LineAxis<span class="typesection">(:, 1) matlab.graphics.primitive.Line {mustBeScalarOrEmpty}</span>
        <span class="comment">% Triangular grid.</span>
        Grid<span class="typesection">(:, 1) matlab.graphics.primitive.Line {mustBeScalarOrEmpty}</span>
        <span class="comment">% Axes ticks.</span>
        Ticks<span class="typesection">(:, 3) matlab.graphics.primitive.Text</span>
        <span class="comment">% Toggle button for the chart controls.</span>
        ToggleButton<span class="typesection">(:, 1) matlab.ui.controls.ToolbarStateButton </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Ternary surface.</span>
        Surface<span class="typesection">(:, 1) matlab.graphics.primitive.Patch {mustBeScalarOrEmpty}</span>
        <span class="comment">% 3D scattered data, plotted using a line object.</span>
        ScatterSeries<span class="typesection">(:, 1) matlab.graphics.primitive.Line </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Internal storage for the x-axis label property.</span>
        XLabel<span class="typesection">(:, 1) matlab.graphics.primitive.Text {mustBeScalarOrEmpty}</span>
        <span class="comment">% Internal storage for the y-axis (left and right) label property.</span>
        YLabel<span class="typesection">(1, 2) matlab.graphics.primitive.Text</span>
        <span class="comment">% Internal storage for the z-axis label property.</span>
        ZLabel<span class="typesection">(:, 1) matlab.graphics.primitive.Text {mustBeScalarOrEmpty}</span>
        <span class="comment">% Pushbutton for rotating the axes clockwise.</span>
        RotateClockwiseButton<span class="typesection">(:, 1) matlab.ui.control.Button </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Pushbutton for rotating the axes conterclockwise.</span>
        RotateCounterclockwiseButton<span class="typesection">(:, 1) matlab.ui.control.Button </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Check box for the axes' colorbar.</span>
        ColorbarCheckBox<span class="typesection">(:, 1) matlab.ui.control.CheckBox </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Check box for the axes' grid visibility.</span>
        GridCheckBox<span class="typesection">(:, 1) matlab.ui.control.CheckBox {mustBeScalarOrEmpty}</span>
        <span class="comment">% Check box for the tick visibility.</span>
        TicksCheckBox<span class="typesection">(:, 1) matlab.ui.control.CheckBox </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Dropdown menu for selecting the surface type.</span>
        SurfaceTypeDropDown<span class="typesection">(:, 1) matlab.ui.control.DropDown </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Dropdown menu for selecting the interpolation method.</span>
        InterpolationMethodDropDown<span class="typesection">(:, 1) matlab.ui.control.DropDown </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Dropdown menu for selecting the Face Color of the surface.</span>
        FaceAlphaSlider<span class="typesection">(:, 1) matlab.ui.control.Slider </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Slider for selecting the Edge Alpha of the surface.</span>
        LineWidthSlider<span class="typesection">(:, 1) matlab.ui.control.Slider </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Dropdown menu for selecting the scatter plot marker.</span>
        ScatterMarkerDropDown<span class="typesection">(:, 1) matlab.ui.control.DropDown </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Slider for selecting the marker size of the scatter series.</span>
        ScatterSizeDataSlider<span class="typesection">(:, 1) matlab.ui.control.Slider </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Access = private, Transient, NonCopyable )</span>

    <span class="keyword">properties</span> ( Constant, Hidden )
        <span class="comment">% Product dependencies.</span>
        Dependencies<span class="typesection">(1, :) string </span>= <span class="string">"MATLAB"</span>
        <span class="comment">% Description.</span>
        ShortDescription<span class="typesection">(1, 1) string </span>= <span class="string">"Barycentric plot of three"</span> + <span class="keyword">...</span>
            <span class="string">" variables summing to a constant"</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Constant, Hidden )</span>

    <span class="keyword">methods</span>

        <span class="keyword">function</span> value = get.Data( obj )

            value = obj.Data_;

        <span class="keyword">end</span> <span class="comment">% get.Data</span>

        <span class="keyword">function</span> set.Data( obj, value )

            <span class="comment">% Mark the chart for an update.</span>
            obj.ComputationRequired = true;

            <span class="comment">% Set the internal data property.</span>
            obj.Data_ = value;

            <span class="comment">% Update the axes.</span>
            obj.Axes.DataAspectRatio = <span class="keyword">...</span>
                [1, 1, 2 * (max( value{:, 4} ) - min( value{:, 4} ))];

        <span class="keyword">end</span> <span class="comment">% set.Data</span>

        <span class="keyword">function</span> value = get.GridResolution( obj )

            value = obj.GridResolution_;

        <span class="keyword">end</span> <span class="comment">% get.GridResolution</span>

        <span class="keyword">function</span> set.GridResolution( obj, value )

            <span class="comment">% Mark the chart for an update.</span>
            obj.ComputationRequired = true;

            <span class="comment">% Set the internal data property.</span>
            obj.GridResolution_ = value;
            obj.ResolutionModified = true;

        <span class="keyword">end</span> <span class="comment">% set.GridResolution</span>

        <span class="keyword">function</span> value = get.TickRate( obj )

            value = obj.TickRate_;

        <span class="keyword">end</span> <span class="comment">% get.TickRate</span>

        <span class="keyword">function</span> set.TickRate( obj, value )

            <span class="comment">% Mark the chart for an update.</span>
            obj.ComputationRequired = true;

            <span class="comment">% Set the internal data property.</span>
            obj.TickRate_ = value;

        <span class="keyword">end</span> <span class="comment">% set.TickRate</span>

        <span class="keyword">function</span> value = get.ShowTicks( obj )

            value = obj.TicksCheckBox.Value;

        <span class="keyword">end</span> <span class="comment">% get.ShowTicks</span>

        <span class="keyword">function</span> set.ShowTicks( obj, value )

            obj.TicksCheckBox.Value = value;
            obj.onTicksCheckBoxSelected()

        <span class="keyword">end</span> <span class="comment">% set.ShowTicks</span>

        <span class="keyword">function</span> value = get.SurfaceType( obj )

            value = obj.SurfaceType_;

        <span class="keyword">end</span> <span class="comment">% get.SurfaceType</span>

        <span class="keyword">function</span> set.SurfaceType( obj, value )

            <span class="comment">% Mark the chart for an update.</span>
            obj.ComputationRequired = true;

            <span class="comment">% Assign the SurfaceType.</span>
            obj.SurfaceType_ = value;

            <span class="comment">% Make sure the dropdown is up-to-date.</span>
            obj.SurfaceTypeDropDown.Value = value;

            <span class="keyword">switch</span> value
                <span class="keyword">case</span> <span class="string">"surface"</span>
                    obj.FaceColor = <span class="string">"flat"</span>;
                    obj.EdgeColor = [0, 0, 0];
                    obj.FaceAlpha = 1;
                    obj.FaceLighting = <span class="string">"flat"</span>;
                    obj.EdgeLighting = <span class="string">"none"</span>;
                <span class="keyword">case</span> <span class="string">"mesh"</span>
                    obj.EdgeColor = <span class="keyword">...</span>
                        get( obj.Axes, <span class="string">"defaultSurfaceFaceColor"</span> );
                    obj.FaceAlpha = 0;
                    obj.FaceLighting = <span class="string">"none"</span>;
                    obj.EdgeLighting = <span class="string">"flat"</span>;
            <span class="keyword">end</span> <span class="comment">% switch/case</span>

        <span class="keyword">end</span> <span class="comment">% set.SurfaceType</span>

        <span class="keyword">function</span> value = get.InterpolationMethod( obj )

            value = obj.InterpolationMethod_;

        <span class="keyword">end</span> <span class="comment">% get.InterpolationMethod</span>

        <span class="keyword">function</span> set.InterpolationMethod( obj, value )

            <span class="comment">% Mark the chart for an update.</span>
            obj.ComputationRequired = true;

            <span class="comment">% Set the interpolation method.</span>
            obj.InterpolationMethod_ = value;

            <span class="comment">% Make sure the dropdown is up-to-date.</span>
            obj.InterpolationMethodDropDown.Value = value;

        <span class="keyword">end</span> <span class="comment">% set.InterpolationMethod</span>

        <span class="keyword">function</span> value = get.Direction( obj )

            value = obj.Direction_;

        <span class="keyword">end</span> <span class="comment">% get.Direction</span>

        <span class="keyword">function</span> set.Direction( obj, value )

            <span class="comment">% Mark the chart for an update.</span>
            obj.ComputationRequired = true;

            <span class="comment">% Set the internal data property.</span>
            obj.Direction_ = value;

        <span class="keyword">end</span> <span class="comment">% set.Direction</span>

        <span class="keyword">function</span> value = get.FaceColor( obj )

            value = obj.Surface.FaceColor;

        <span class="keyword">end</span> <span class="comment">% get.FaceColor</span>

        <span class="keyword">function</span> set.FaceColor( obj, value )

            <span class="comment">% Set the property.</span>
            obj.Surface.FaceColor = value;

        <span class="keyword">end</span> <span class="comment">% set.FaceColor</span>

        <span class="keyword">function</span> value = get.EdgeColor( obj )

            value = obj.Surface.EdgeColor;

        <span class="keyword">end</span> <span class="comment">% get.EdgeColor</span>

        <span class="keyword">function</span> set.EdgeColor( obj, value )

            <span class="comment">% Validate.</span>
            value = convertCharsToStrings( value );
            <span class="keyword">if</span> ~isstring( value ) || ~ismember( value, [<span class="string">"flat"</span>, <span class="string">"none"</span>] )
                value = validatecolor( value );
            <span class="keyword">end</span> <span class="comment">% if</span>

            <span class="comment">% Set the property.</span>
            obj.Surface.EdgeColor = value;

        <span class="keyword">end</span> <span class="comment">% set.EdgeColor</span>

        <span class="keyword">function</span> value = get.FaceAlpha( obj )

            value = obj.Surface.FaceAlpha;

        <span class="keyword">end</span> <span class="comment">% get.FaceAlpha</span>

        <span class="keyword">function</span> set.FaceAlpha( obj, value )

            <span class="comment">% Set the property.</span>
            obj.Surface.FaceAlpha = value;

            <span class="comment">% Make sure the slider is up-to-date</span>
            obj.FaceAlphaSlider.Value = value;
            obj.FaceAlphaSlider.Tooltip = string( value );

        <span class="keyword">end</span> <span class="comment">% set.FaceAlpha</span>

        <span class="keyword">function</span> value = get.EdgeAlpha( obj )

            value = obj.Surface.EdgeAlpha;

        <span class="keyword">end</span> <span class="comment">% get.EdgeAlpha</span>

        <span class="keyword">function</span> set.EdgeAlpha( obj, value )

            <span class="comment">% Set the property.</span>
            obj.Surface.EdgeAlpha = value;

        <span class="keyword">end</span> <span class="comment">% set.EdgeAlpha</span>

        <span class="keyword">function</span> value = get.LineStyle( obj )

            value = obj.Surface.LineStyle;

        <span class="keyword">end</span> <span class="comment">% get.LineStyle</span>

        <span class="keyword">function</span> set.LineStyle( obj, value )

            <span class="comment">% Set the property.</span>
            obj.Surface.LineStyle = value;

        <span class="keyword">end</span> <span class="comment">% set.LineStyle</span>

        <span class="keyword">function</span> value = get.LineWidth( obj )

            value = obj.Surface.LineWidth;

        <span class="keyword">end</span> <span class="comment">% get.LineWidth</span>

        <span class="keyword">function</span> set.LineWidth( obj, value )

            <span class="comment">% Set the property.</span>
            obj.Surface.LineWidth = value;

            <span class="comment">% Make sure the slider is up-to-date.</span>
            obj.LineWidthSlider.Value = value;
            obj.LineWidthSlider.Tooltip = string( value );

        <span class="keyword">end</span> <span class="comment">% set.LineWidth</span>

        <span class="keyword">function</span> value = get.FaceLighting( obj )

            value = obj.Surface.FaceLighting;

        <span class="keyword">end</span> <span class="comment">% get.FaceLighting</span>

        <span class="keyword">function</span> set.FaceLighting( obj, value )

            <span class="comment">% Set the Surface property.</span>
            obj.Surface.FaceLighting = value;

        <span class="keyword">end</span> <span class="comment">% set.FaceLighting</span>

        <span class="keyword">function</span> value = get.EdgeLighting( obj )

            value = obj.Surface.EdgeLighting;

        <span class="keyword">end</span> <span class="comment">% get.EdgeLighting</span>

        <span class="keyword">function</span> set.EdgeLighting( obj, value )

            <span class="comment">% Set the Surface property.</span>
            obj.Surface.EdgeLighting = value;

        <span class="keyword">end</span> <span class="comment">% set.EdgeLighting</span>

        <span class="keyword">function</span> value = get.Marker( obj )

            value = obj.ScatterSeries.Marker;

        <span class="keyword">end</span> <span class="comment">% get.Marker</span>

        <span class="keyword">function</span> set.Marker( obj, value )

            <span class="comment">% Set the property.</span>
            obj.ScatterSeries.Marker = value;

            <span class="comment">% Make sure the dropdown is up-to-date.</span>
            obj.ScatterMarkerDropDown.Value = value;

        <span class="keyword">end</span> <span class="comment">% set.Marker</span>

        <span class="keyword">function</span> value = get.MarkerSize( obj )

            value = obj.ScatterSeries.MarkerSize;

        <span class="keyword">end</span> <span class="comment">% get.MarkerSize</span>

        <span class="keyword">function</span> set.MarkerSize( obj, value )

            <span class="comment">% Set the Scatter property.</span>
            obj.ScatterSeries.MarkerSize = value;

            <span class="comment">% Make sure the dropdown is up-to-date</span>
            obj.ScatterSizeDataSlider.Value = value;

        <span class="keyword">end</span> <span class="comment">% set.MarkerSize</span>

        <span class="keyword">function</span> value = get.MarkerEdgeColor( obj )

            value = obj.ScatterSeries.MarkerEdgeColor;

        <span class="keyword">end</span> <span class="comment">% get.MarkerEdgeColor</span>

        <span class="keyword">function</span> set.MarkerEdgeColor( obj, value )

            <span class="comment">% Validate.</span>
            value = convertCharsToStrings( value );
            <span class="keyword">if</span> ~isstring( value ) || ~ismember( value, [<span class="string">"flat"</span>, <span class="string">"none"</span>] )
                value = validatecolor( value );
            <span class="keyword">end</span> <span class="comment">% if</span>

            <span class="comment">% Set the property.</span>
            obj.ScatterSeries.MarkerEdgeColor = value;

        <span class="keyword">end</span> <span class="comment">% set.MarkerEdgeColor</span>

        <span class="keyword">function</span> value = get.MarkerFaceColor( obj )

            value = obj.ScatterSeries.MarkerFaceColor;

        <span class="keyword">end</span> <span class="comment">% get.MarkerFaceColor</span>

        <span class="keyword">function</span> set.MarkerFaceColor( obj, value )

            <span class="comment">% Validate.</span>
            value = convertCharsToStrings( value );
            <span class="keyword">if</span> ~isstring( value ) || ~ismember( value, [<span class="string">"flat"</span>, <span class="string">"none"</span>] )
                value = validatecolor( value );
            <span class="keyword">end</span> <span class="comment">% if</span>

            <span class="comment">% Set the property.</span>
            obj.ScatterSeries.MarkerFaceColor = value;

        <span class="keyword">end</span> <span class="comment">% set.MarkerFaceColor</span>

        <span class="keyword">function</span> value = get.AxisLineWidth( obj )

            value = obj.LineAxis.LineWidth;

        <span class="keyword">end</span> <span class="comment">% get.AxisLineWidth</span>

        <span class="keyword">function</span> set.AxisLineWidth( obj, value )

            <span class="comment">% Set the Axis property.</span>
            obj.LineAxis.LineWidth = value;

        <span class="keyword">end</span> <span class="comment">% set.AxisLineWidth</span>

        <span class="keyword">function</span> value = get.GridVisible( obj )

            value = obj.Grid.Visible;

        <span class="keyword">end</span> <span class="comment">% get.GridVisible</span>

        <span class="keyword">function</span> set.GridVisible( obj, value )

            <span class="comment">% Set the Grid property.</span>
            obj.Grid.Visible = value;

            <span class="comment">% Ensure the grid check box is up-to-date.</span>
            obj.GridCheckBox.Value = value;

        <span class="keyword">end</span> <span class="comment">% set.GridVisible</span>

        <span class="keyword">function</span> value = get.GridLineWidth( obj )

            value = obj.Grid.LineWidth;

        <span class="keyword">end</span> <span class="comment">% get.GridLineWidth</span>

        <span class="keyword">function</span> set.GridLineWidth( obj, value )

            <span class="comment">% Set the Grid property.</span>
            obj.Grid.LineWidth = value;

        <span class="keyword">end</span> <span class="comment">% set.GridLineWidth</span>

        <span class="keyword">function</span> value = get.ScatterVisible( obj )

            value = obj.ScatterSeries.Visible;

        <span class="keyword">end</span> <span class="comment">% get.ScatterVisible</span>

        <span class="keyword">function</span> set.ScatterVisible( obj, value )

            <span class="comment">% Set the Scatter property.</span>
            obj.ScatterSeries.Visible = value;

        <span class="keyword">end</span> <span class="comment">% set.ScatterVisible</span>

        <span class="keyword">function</span> value = get.ColorbarVisible( obj )

            value = obj.Axes.Colorbar;

        <span class="keyword">end</span> <span class="comment">% get.ColorbarVisible</span>

        <span class="keyword">function</span> set.ColorbarVisible( obj, value )

            <span class="keyword">if</span> value
                obj.colorbar();
            <span class="keyword">else</span>
                obj.colorbar( <span class="string">"off"</span> )
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% set.ColorbarVisible</span>

        <span class="keyword">function</span> value = get.Controls( obj )

            value = obj.ToggleButton.Value;

        <span class="keyword">end</span> <span class="comment">% get.Controls</span>

        <span class="keyword">function</span> set.Controls( obj, value )

            <span class="comment">% Update the toggle button.</span>
            obj.ToggleButton.Value = value;

            <span class="comment">% Invoke the toggle button callback.</span>
            obj.onToggleButtonPressed()

        <span class="keyword">end</span> <span class="comment">% set.Controls</span>

    <span class="keyword">end</span> <span class="comment">% methods</span>

    <span class="keyword">methods</span>

        <span class="keyword">function</span> obj = TernaryChart( namedArgs )
            <span class="comment">%TERNARYCHART Construct a TernaryChart object, given optional</span>
            <span class="comment">%name-value arguments.</span>

            <span class="keyword">arguments</span> ( Input )
                namedArgs.?TernaryChart
            <span class="keyword">end</span> <span class="comment">% arguments ( Input )</span>

            <span class="comment">% Set any user-defined properties.</span>
            set( obj, namedArgs )

        <span class="keyword">end</span> <span class="comment">% constructor</span>

        <span class="keyword">function</span> xlabel( obj, newlabel, namedArgs )
            <span class="comment">%XLABEL Add an x-label to the chart.</span>

            <span class="keyword">arguments</span>
                obj<span class="typesection">(1, 1) TernaryChart</span>
                newlabel<span class="typesection">(1, 1) string</span>
                namedArgs.?matlab.graphics.primitive.Text
            <span class="keyword">end</span> <span class="comment">% arguments</span>

            propertyCell = namedargs2cell( namedArgs );
            set( obj.XLabel, <span class="string">"String"</span>, newlabel, propertyCell{:} )

        <span class="keyword">end</span> <span class="comment">% xlabel</span>

        <span class="keyword">function</span> ylabel( obj, side, newlabel, namedArgs )
            <span class="comment">%YLABEL Add left/right y-labels to the chart.</span>

            <span class="keyword">arguments</span>
                obj<span class="typesection">(1, 1) TernaryChart</span>
                side <span class="typesection">(1, 1) string {mustBeMember( side, </span><span class="keyword">...</span>
                    <span class="typesection">["right", "left"])}</span>
                newlabel<span class="typesection">(1, 1) string</span>
                namedArgs.?matlab.graphics.primitive.Text
            <span class="keyword">end</span> <span class="comment">% arguments</span>

            propertyCell = namedargs2cell( namedArgs );

            <span class="keyword">switch</span> side
                <span class="keyword">case</span> <span class="string">"left"</span>
                    set( obj.YLabel(1, 1), <span class="keyword">...</span>
                        <span class="string">"String"</span>, newlabel, propertyCell{:} )
                <span class="keyword">case</span> <span class="string">"right"</span>
                    set( obj.YLabel(1, 2), <span class="keyword">...</span>
                        <span class="string">"String"</span>, newlabel,  propertyCell{:} )
            <span class="keyword">end</span> <span class="comment">% switch/case</span>

        <span class="keyword">end</span> <span class="comment">% ylabel</span>

        <span class="keyword">function</span> zlabel( obj, newlabel, namedArgs )
            <span class="comment">%ZLABEL Add a z-label to the chart.</span>

            <span class="keyword">arguments</span>
                obj<span class="typesection">(1, 1) TernaryChart</span>
                newlabel<span class="typesection">(1, 1) string</span>
                namedArgs.?matlab.graphics.primitive.Text
            <span class="keyword">end</span> <span class="comment">% arguments</span>

            propertyCell = namedargs2cell(namedArgs);
            set( obj.ZLabel, <span class="string">"String"</span>, newlabel, propertyCell{:} );

        <span class="keyword">end</span> <span class="comment">% zlabel</span>

        <span class="keyword">function</span> varargout = title( obj, varargin )

            [varargout{1:nargout}] = title( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% title</span>

        <span class="keyword">function</span> varargout = colorbar( obj, varargin )

            <span class="comment">% Call the colorbar function on the chart's axes.</span>
            [varargout{1:nargout}] = colorbar( obj.Axes, varargin{:} );

            <span class="comment">% Ensure the colorbar check box is up-to-date.</span>
            obj.ColorbarCheckBox.Value = ~isempty( obj.Axes.Colorbar );

        <span class="keyword">end</span> <span class="comment">% colorbar</span>

        <span class="keyword">function</span> varargout = colormap( obj, varargin )

            [varargout{1:nargout}] = colormap( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% colormap</span>

        <span class="keyword">function</span> varargout = view( obj, varargin )

            [varargout{1:nargout}] = view( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% view</span>

        <span class="keyword">function</span> rotate( obj, dir )
            <span class="comment">%ROTATE Rotate the chart in the specified direction.</span>

            <span class="keyword">arguments</span>
                obj<span class="typesection">(1, 1) TernaryChart</span>
                dir<span class="typesection">(1, 1) string </span><span class="keyword">...</span>
                    <span class="typesection">{mustBeMember( dir, </span><span class="keyword">...</span>
                    <span class="typesection">["clockwise", "counterclockwise"] )}</span>
            <span class="keyword">end</span> <span class="comment">% arguments</span>

            labels = [string( obj.XLabel.String );
                string( obj.YLabel(1, 1).String );
                string( obj.YLabel(1, 2).String )];

            <span class="keyword">switch</span> dir

                <span class="keyword">case</span> <span class="string">"clockwise"</span>

                    obj.Data = obj.Data_(:, [3, 1, 2, 4]);
                    obj.xlabel( labels(3, :) )
                    obj.ylabel( <span class="string">"left"</span>, labels(1, :) )
                    obj.ylabel( <span class="string">"right"</span>, labels(2, :) )

                <span class="keyword">case</span> <span class="string">"counterclockwise"</span>

                    obj.Data = obj.Data_(:, [2, 3, 1, 4]);
                    obj.xlabel( labels(2, :) )
                    obj.ylabel( <span class="string">"left"</span>, labels(3, :) )
                    obj.ylabel( <span class="string">"right"</span>, labels(1, :) )

            <span class="keyword">end</span> <span class="comment">% switch/case</span>

        <span class="keyword">end</span> <span class="comment">% rotate</span>

        <span class="keyword">function</span> swapdata( obj, pos1, pos2 )
            <span class="comment">%SWAPDATA Interchange two chart data variables.</span>

            <span class="keyword">arguments</span>
                obj<span class="typesection">(1, 1) TernaryChart</span>
                pos1<span class="typesection">(1, 1) double {mustBeMember(pos1, 1:3)}</span>
                pos2<span class="typesection">(1, 1) double {mustBeMember(pos2, 1:3)}</span>
            <span class="keyword">end</span> <span class="comment">% arguments</span>

            <span class="comment">% The positions correspond to:</span>
            <span class="comment">% 1) x-axis</span>
            <span class="comment">% 2) yleft-axis</span>
            <span class="comment">% 3) yright-axis</span>
            obj.Data(:, [pos1, pos2]) = obj.Data(:, [pos2, pos1]);
            obj.Data.Properties.VariableNames([pos1, pos2]) = <span class="keyword">...</span>
                obj.Data.Properties.VariableNames([pos2, pos1]);
            labels = [obj.XLabel.String;
                obj.YLabel(1, 1).String;
                obj.YLabel(1, 2).String];
            labels([pos1, pos2]) = labels([pos2, pos1]);
            obj.xlabel( labels(1, :) )
            obj.ylabel( <span class="string">"left"</span>, labels(2, :) )
            obj.ylabel( <span class="string">"right"</span>, labels(3, :) )

        <span class="keyword">end</span> <span class="comment">% swapdata</span>

        <span class="keyword">function</span> resetLabels( obj )

            <span class="comment">% Modify the labels to match the table headers</span>
            obj.XLabel.String = obj.Data_.Properties.VariableNames{1};
            obj.YLabel(1, 1).String = <span class="keyword">...</span>
                obj.Data_.Properties.VariableNames{2};
            obj.YLabel(1, 2).String = <span class="keyword">...</span>
                obj.Data_.Properties.VariableNames{3};
            obj.ZLabel.String = obj.Data_.Properties.VariableNames{4};

        <span class="keyword">end</span> <span class="comment">% resetLabels</span>

        <span class="keyword">function</span> exportgraphics( obj, varargin )

            exportgraphics( obj.Axes, varargin{:} )

        <span class="keyword">end</span> <span class="comment">% exportgraphics</span>

    <span class="keyword">end</span> <span class="comment">% methods</span>

    <span class="keyword">methods</span> ( Access = protected )

        <span class="keyword">function</span> setup( obj )
            <span class="comment">%SETUP Initialize the chart graphics.</span>

            <span class="comment">% Define the layout grid.</span>
            obj.LayoutGrid = uigridlayout( obj, [1, 2], <span class="keyword">...</span>
                <span class="string">"ColumnWidth"</span>, [<span class="string">"1x"</span>, <span class="string">"0x"</span>] );

            <span class="comment">% Create the chart's axes.</span>
            obj.Axes = axes( <span class="string">"Parent"</span>, obj.LayoutGrid, <span class="keyword">...</span>
                <span class="string">"DataAspectRatioMode"</span>, <span class="string">"manual"</span>, <span class="keyword">...</span>
                <span class="string">"Visible"</span>, <span class="string">"off"</span>, <span class="keyword">...</span>
                <span class="string">"NextPlot"</span>, <span class="string">"add"</span> );
            obj.Axes.Title.Visible = <span class="string">"on"</span>;
            obj.ResolutionModified = false;

            <span class="comment">% Create the chart's labels.</span>
            obj.XLabel = text( obj.Axes, 0, -0.08, <span class="string">"A"</span>, <span class="keyword">...</span>
                <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span> );
            obj.YLabel(1, 1) = text( obj.Axes, <span class="keyword">...</span>
                -0.45 * sin( pi/6 ) - 0.08, sqrt( 3 )/4 + 0.08, <span class="string">"B"</span>, <span class="keyword">...</span>
                <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span>, <span class="keyword">...</span>
                <span class="string">"Rotation"</span>, 60 );
            obj.YLabel(1, 2) = text( obj.Axes, <span class="keyword">...</span>
                0.45 * sin( pi/6 ) + 0.08, sqrt( 3 )/4 + 0.08, <span class="string">"C"</span>, <span class="keyword">...</span>
                <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span>, <span class="keyword">...</span>
                <span class="string">"Rotation"</span>, -60 );
            obj.ZLabel = text( obj.Axes, 0, 0.95, <span class="string">"Z"</span>, <span class="keyword">...</span>
                <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span> );

            <span class="comment">% Create the grid.</span>
            obj.Grid = line( <span class="string">"Parent"</span>, obj.Axes, <span class="keyword">...</span>
                <span class="string">"XData"</span>, NaN, <span class="keyword">...</span>
                <span class="string">"YData"</span>, NaN, <span class="keyword">...</span>
                <span class="string">"Color"</span>, <span class="string">"k"</span>, <span class="keyword">...</span>
                <span class="string">"LineWidth"</span>, 1 );

            <span class="comment">% Add a state button to show/hide the chart's controls.</span>
            tb = axtoolbar( obj.Axes, <span class="string">"default"</span> );
            iconPath = fullfile( chartsRoot(), <span class="string">"charts"</span>, <span class="string">"images"</span>, <span class="keyword">...</span>
                <span class="string">"Cog.png"</span> );
            obj.ToggleButton = axtoolbarbtn( tb, <span class="string">"state"</span>, <span class="keyword">...</span>
                <span class="string">"Value"</span>, <span class="string">"off"</span>, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Show chart controls"</span>, <span class="keyword">...</span>
                <span class="string">"Icon"</span>, iconPath, <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onToggleButtonPressed );

            <span class="comment">% Create the line and surface plot.</span>
            obj.Surface = trisurf( [], NaN, NaN, NaN, <span class="keyword">...</span>
                <span class="string">"Parent"</span>, obj.Axes );

            <span class="comment">% Define the data tips.</span>
            datatip( obj.Surface, <span class="string">"Visible"</span>, <span class="string">"off"</span> );
            obj.Surface.DataTipTemplate.DataTipRows(1).Label = <span class="keyword">...</span>
                obj.XLabel.String;
            obj.Surface.DataTipTemplate.DataTipRows(2).Label = <span class="keyword">...</span>
                obj.YLabel(1, 1).String;
            obj.Surface.DataTipTemplate.DataTipRows(3).Label = <span class="keyword">...</span>
                obj.YLabel(1, 2).String;
            obj.Surface.DataTipTemplate.DataTipRows(4).Label = <span class="keyword">...</span>
                obj.ZLabel.String;

            <span class="comment">% Create the scatter series for the data points.</span>
            obj.ScatterSeries = line( <span class="string">"Parent"</span>, obj.Axes, <span class="keyword">...</span>
                <span class="string">"XData"</span>, NaN, <span class="keyword">...</span>
                <span class="string">"YData"</span>, NaN, <span class="keyword">...</span>
                <span class="string">"ZData"</span>, NaN, <span class="keyword">...</span>
                <span class="string">"Marker"</span>, <span class="string">"."</span>, <span class="keyword">...</span>
                <span class="string">"MarkerSize"</span>, 5, <span class="keyword">...</span>
                <span class="string">"LineStyle"</span>, <span class="string">"none"</span> );

            <span class="comment">% Define the data tips.</span>
            datatip( obj.ScatterSeries, <span class="string">"Visible"</span>, <span class="string">"off"</span> );
            obj.ScatterSeries.DataTipTemplate.DataTipRows(1).Label = <span class="keyword">...</span>
                obj.XLabel.String;
            obj.ScatterSeries.DataTipTemplate.DataTipRows(2).Label = <span class="keyword">...</span>
                obj.YLabel(1, 1).String;
            obj.ScatterSeries.DataTipTemplate.DataTipRows(3).Label = <span class="keyword">...</span>
                obj.YLabel(1, 2).String;
            obj.ScatterSeries.DataTipTemplate.DataTipRows(4).Label = <span class="keyword">...</span>
                obj.ZLabel.String;

            <span class="comment">% Create outbound triangle.</span>
            obj.LineAxis = line( <span class="string">"Parent"</span>, obj.Axes, <span class="keyword">...</span>
                <span class="string">"XData"</span>, [-0.5, 0.5, 0, -0.5], <span class="keyword">...</span>
                <span class="string">"YData"</span>, [0, 0, sqrt( 3 )/2, 0], <span class="keyword">...</span>
                <span class="string">"ZData"</span>, [0, 0, 0, 0], <span class="keyword">...</span>
                <span class="string">"Color"</span>, <span class="string">"k"</span>, <span class="keyword">...</span>
                <span class="string">"LineWidth"</span>, 2 );

            <span class="comment">% Name labels from initial table (or default).</span>
            obj.resetLabels()

            <span class="comment">% Configure the chart's axes.</span>
            view( obj.Axes, [0 90] )

            <span class="comment">% Add the chart controls.</span>
            p = uipanel( <span class="string">"Parent"</span>, obj.LayoutGrid, <span class="keyword">...</span>
                <span class="string">"Title"</span>, <span class="string">"Chart Controls"</span>, <span class="keyword">...</span>
                <span class="string">"FontWeight"</span>, <span class="string">"bold"</span> );
            vLayout = uigridlayout( p, [3, 1], <span class="keyword">...</span>
                <span class="string">"RowHeight"</span>, [<span class="string">"fit"</span>, <span class="string">"fit"</span>] );

            <span class="comment">% Add the chart controls for the axis.</span>
            p = uipanel( <span class="string">"Parent"</span>, vLayout, <span class="keyword">...</span>
                <span class="string">"Title"</span>, <span class="string">"Axis"</span>, <span class="keyword">...</span>
                <span class="string">"FontWeight"</span>, <span class="string">"bold"</span> );
            controlLayout = uigridlayout( p, [3, 2], <span class="keyword">...</span>
                <span class="string">"RowHeight"</span>, [<span class="string">"fit"</span>, <span class="string">"fit"</span>, <span class="string">"fit"</span>], <span class="keyword">...</span>
                <span class="string">"ColumnWidth"</span>, [<span class="string">"1x"</span>, <span class="string">"1x"</span>] );

            <span class="comment">% Axis rotation controls.</span>
            obj.RotateClockwiseButton = uibutton( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Text"</span>, char( 8635 ), <span class="keyword">...</span>
                <span class="string">"FontSize"</span>, 30, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Rotate clockwise"</span>, <span class="keyword">...</span>
                <span class="string">"ButtonPushedFcn"</span>, @obj.onRotateClockwiseButtonPushed );
            obj.RotateCounterclockwiseButton = uibutton( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Text"</span>, char( 8634 ), <span class="keyword">...</span>
                <span class="string">"FontSize"</span>, 30, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Rotate clockwise"</span>, <span class="keyword">...</span>
                <span class="string">"ButtonPushedFcn"</span>, <span class="keyword">...</span>
                @obj.onRotateCounterclockwiseButtonPushed );

            <span class="comment">% Axis check boxes.</span>
            obj.ColorbarCheckBox = uicheckbox( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Value"</span>, false, <span class="keyword">...</span>
                <span class="string">"Text"</span>, <span class="string">"Colorbar"</span>, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Hide/show colorbar"</span>, <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onColorbarSelected );
            obj.ColorbarCheckBox.Layout.Column = [1, 2];
            obj.GridCheckBox = uicheckbox( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Value"</span>, true, <span class="keyword">...</span>
                <span class="string">"Text"</span>, <span class="string">"Grid"</span>, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Hide/show grid"</span>, <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onGridSelected );
            obj.GridCheckBox.Layout.Column = [1, 2];
            obj.TicksCheckBox = uicheckbox( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Value"</span>, true, <span class="keyword">...</span>
                <span class="string">"Text"</span>, <span class="string">"Show ticks"</span>, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Hide/show ticks"</span>, <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onTicksCheckBoxSelected );

            <span class="comment">% Add controls for the surface.</span>
            p = uipanel( <span class="string">"Parent"</span>, vLayout, <span class="keyword">...</span>
                <span class="string">"Title"</span>, <span class="string">"Surface"</span>, <span class="keyword">...</span>
                <span class="string">"FontWeight"</span>, <span class="string">"bold"</span> );
            controlLayout = uigridlayout( p, [4, 2], <span class="keyword">...</span>
                <span class="string">"RowHeight"</span>, repmat( <span class="string">"fit"</span>, 1, 4 ), <span class="keyword">...</span>
                <span class="string">"ColumnWidth"</span>, [<span class="string">"1x"</span>, <span class="string">"1x"</span>] );

            <span class="comment">% Surface type selector.</span>
            uilabel( <span class="string">"Parent"</span>, controlLayout, <span class="string">"Text"</span>, <span class="string">"Surface type:"</span> );
            obj.SurfaceTypeDropDown = uidropdown( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Items"</span>, [<span class="string">"surface"</span>, <span class="string">"mesh"</span>], <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Select the surface type"</span>, <span class="keyword">...</span>
                <span class="string">"Value"</span>, obj.SurfaceType, <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onSufaceTypeSelected );

            <span class="comment">% Interpolation method selector.</span>
            uilabel( <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Text"</span>, <span class="string">"Interpolation method:"</span> );
            obj.InterpolationMethodDropDown = uidropdown( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Items"</span>, <span class="keyword">...</span>
                [<span class="string">"linear"</span>, <span class="string">"nearest"</span>, <span class="string">"natural"</span>, <span class="string">"cubic"</span>, <span class="string">"v4"</span>], <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Select the surface type"</span>, <span class="keyword">...</span>
                <span class="string">"Value"</span>, obj.InterpolationMethod, <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onInterpolationMethodSelected );

            <span class="comment">% Face alpha.</span>
            uilabel( <span class="string">"Parent"</span>, controlLayout, <span class="string">"Text"</span>, <span class="string">"Face alpha:"</span> );
            obj.FaceAlphaSlider = uislider( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Value"</span>, 1, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"1"</span>, <span class="keyword">...</span>
                <span class="string">"Limits"</span>, [0, 1], <span class="keyword">...</span>
                <span class="string">"MajorTicks"</span>, [0, 0.25, 0.5, 0.75, 1], <span class="keyword">...</span>
                <span class="string">"MajorTickLabels"</span>, [<span class="string">"0"</span>, <span class="string">"0.25"</span>, <span class="string">"0.5"</span>, <span class="string">"0.75"</span>, <span class="string">"1"</span>], <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onFaceAlphaSelected );

            <span class="comment">% Line width.</span>
            uilabel( <span class="string">"Parent"</span>, controlLayout, <span class="string">"Text"</span>, <span class="string">"Line width:"</span> );
            obj.LineWidthSlider = uislider( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Value"</span>, 1, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"1"</span>, <span class="keyword">...</span>
                <span class="string">"Limits"</span>, [0.5, 20], <span class="keyword">...</span>
                <span class="string">"MajorTicks"</span>, [0.5, 5, 10, 15, 20], <span class="keyword">...</span>
                <span class="string">"MajorTickLabels"</span>, [<span class="string">"0.5"</span>, <span class="string">"5"</span>, <span class="string">"10"</span>, <span class="string">"15"</span>, <span class="string">"20"</span>], <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onLineWidthSelected );

            <span class="comment">% Add controls for the scatter series.</span>
            p = uipanel( <span class="string">"Parent"</span>, vLayout, <span class="keyword">...</span>
                <span class="string">"Title"</span>, <span class="string">"Scatter Series"</span>, <span class="keyword">...</span>
                <span class="string">"FontWeight"</span>, <span class="string">"bold"</span> );
            controlLayout = uigridlayout( p, [2, 2], <span class="keyword">...</span>
                <span class="string">"RowHeight"</span>, repmat( <span class="string">"fit"</span>, 1, 2 ), <span class="keyword">...</span>
                <span class="string">"ColumnWidth"</span>, [<span class="string">"1x"</span>, <span class="string">"1x"</span>] );

            <span class="comment">% Scatter series marker type selector.</span>
            uilabel( <span class="string">"Parent"</span>, controlLayout, <span class="string">"Text"</span>, <span class="string">"Marker:"</span> );
            obj.ScatterMarkerDropDown = uidropdown( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Items"</span>, set( obj.ScatterSeries, <span class="string">"Marker"</span> ), <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"Select the marker for the scatter plot"</span>, <span class="keyword">...</span>
                <span class="string">"Value"</span>, obj.ScatterSeries.Marker, <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onScatterMarkerSelected );

            <span class="comment">% Scatter series marker size selector.</span>
            uilabel( <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Text"</span>, <span class="string">"Marker size:"</span> );
            obj.ScatterSizeDataSlider = uislider( <span class="keyword">...</span>
                <span class="string">"Parent"</span>, controlLayout, <span class="keyword">...</span>
                <span class="string">"Value"</span>, 5, <span class="keyword">...</span>
                <span class="string">"Tooltip"</span>, <span class="string">"5"</span>, <span class="keyword">...</span>
                <span class="string">"Limits"</span>, [0.5, 40], <span class="keyword">...</span>
                <span class="string">"MajorTicks"</span>, [0.5, 10, 20, 30, 40], <span class="keyword">...</span>
                <span class="string">"MajorTickLabels"</span>, [<span class="string">"0.5"</span>, <span class="string">"10"</span>, <span class="string">"20"</span>, <span class="string">"30"</span>, <span class="string">"40"</span>], <span class="keyword">...</span>
                <span class="string">"ValueChangedFcn"</span>, @obj.onMarkerSizeSelected );

        <span class="keyword">end</span> <span class="comment">% setup</span>

        <span class="keyword">function</span> update( obj )
            <span class="comment">%UPDATE Refresh the chart graphics.</span>

            <span class="keyword">if</span> obj.ComputationRequired

                <span class="comment">% Avoid any conflict when the resolution is changed.</span>
                <span class="keyword">if</span> obj.ResolutionModified
                    delete( obj.Surface.DataTipTemplate )
                    delete( obj.ScatterSeries.DataTipTemplate )
                    obj.ResolutionModified = false;
                <span class="keyword">end</span> <span class="comment">% if</span>

                <span class="comment">% Update the surface.</span>
                tri = tricoords( obj.GridResolution_+1 );
                [xg, yg, zg] = tridata( obj );
                set( obj.Surface, <span class="string">"Vertices"</span>, [xg(:), yg(:), zg(:)], <span class="keyword">...</span>
                    <span class="string">"Faces"</span>, tri(:, :), <span class="keyword">...</span>
                    <span class="string">"FaceVertexCData"</span>, zg(:), <span class="keyword">...</span>
                    <span class="string">"Parent"</span>, obj.Axes )

                <span class="comment">% Update the scatter series.</span>
                <span class="keyword">if</span> obj.ScatterVisible
                    [~, x, y, z] = data2cart( obj );
                    set( obj.ScatterSeries, <span class="string">"XData"</span>, x(:), <span class="keyword">...</span>
                        <span class="string">"YData"</span>, y(:), <span class="keyword">...</span>
                        <span class="string">"ZData"</span>, z(:) )
                <span class="keyword">else</span>
                    set( obj.ScatterSeries, <span class="string">"XData"</span>, NaN, <span class="keyword">...</span>
                        <span class="string">"YData"</span>, NaN, <span class="keyword">...</span>
                        <span class="string">"ZData"</span>, NaN )
                <span class="keyword">end</span> <span class="comment">% if</span>

                <span class="comment">% Update the ticks.</span>
                delete( obj.Ticks )
                obj.Ticks = createTicks( obj );

                <span class="comment">% Update the grid.</span>
                [x, y] = gridcoords( obj );
                set( obj.Grid, <span class="string">"XData"</span>, x, <span class="keyword">...</span>
                    <span class="string">"YData"</span>, y, <span class="keyword">...</span>
                    <span class="string">"LineWidth"</span>, obj.GridLineWidth, <span class="keyword">...</span>
                    <span class="string">"Visible"</span>, obj.GridVisible )

                <span class="comment">% Update the values in the custom datatips for the surface.</span>
                obj.Surface.DataTipTemplate.DataTipRows(1).Label = <span class="keyword">...</span>
                    obj.XLabel.String;
                obj.Surface.DataTipTemplate.DataTipRows(2).Label = <span class="keyword">...</span>
                    obj.YLabel(1, 1).String;
                obj.Surface.DataTipTemplate.DataTipRows(3).Label = <span class="keyword">...</span>
                    obj.YLabel(1, 2).String;
                obj.Surface.DataTipTemplate.DataTipRows(4).Label = <span class="keyword">...</span>
                    obj.ZLabel.String;
                [Ag, Bg, Cg] = cart2tern( obj );

                obj.Surface.DataTipTemplate.DataTipRows(1).Value = Ag;
                obj.Surface.DataTipTemplate.DataTipRows(2).Value = Bg;
                obj.Surface.DataTipTemplate.DataTipRows(3).Value = Cg;
                obj.Surface.DataTipTemplate.DataTipRows(4).Value = <span class="keyword">...</span>
                    obj.Surface.ZData;

                <span class="comment">% Update the custom datatips for the scatter series.</span>
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(1).Label = obj.XLabel.String;
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(2).Label = obj.YLabel(1, 1).String;
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(3).Label = obj.YLabel(1, 2).String;
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(4).Label = obj.ZLabel.String;
                [Ag, Bg, Cg] = cart2tern( obj );
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(1).Value = Ag;
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(2).Value = Bg;
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(3).Value = Cg;
                obj.ScatterSeries.DataTipTemplate. <span class="keyword">...</span>
                    DataTipRows(4).Value = obj.ScatterSeries.ZData;

                <span class="comment">% Mark the chart clean.</span>
                obj.ComputationRequired = false;

            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% update</span>

    <span class="keyword">end</span> <span class="comment">% methods ( Access = protected )</span>

    <span class="keyword">methods</span> ( Access = private )

        <span class="keyword">function</span> onToggleButtonPressed( obj, ~, ~ )
            <span class="comment">%ONTOGGLEBUTTONPRESSED Hide/show the chart controls.</span>

            toggleDown = obj.ToggleButton.Value;

            <span class="keyword">if</span> toggleDown
                <span class="comment">% Show the controls.</span>
                obj.LayoutGrid.ColumnWidth{2} = <span class="string">"fit"</span>;
                obj.ToggleButton.Tooltip = <span class="string">"Hide chart controls"</span>;
            <span class="keyword">else</span>
                <span class="comment">% Hide the controls.</span>
                obj.LayoutGrid.ColumnWidth{2} = <span class="string">"0x"</span>;
                obj.ToggleButton.Tooltip = <span class="string">"Show chart controls"</span>;
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% onToggleButtonPressed</span>

        <span class="keyword">function</span> onRotateClockwiseButtonPushed( obj, ~, ~ )
            <span class="comment">%ONROTATECLOCKWISEBUTTONPUSHED Allow the user to rotate the</span>
            <span class="comment">%chart in the clockwise direction.</span>

            obj.rotate( <span class="string">"clockwise"</span> )

        <span class="keyword">end</span> <span class="comment">% onRotateClockwiseButtonPushed</span>

        <span class="keyword">function</span> onRotateCounterclockwiseButtonPushed( obj, ~, ~ )
            <span class="comment">%ONROTATECOUNTERCLOCKWISEBUTTONPUSHED Allow the user to</span>
            <span class="comment">%rotate the chart in the counterclockwise direction.</span>

            obj.rotate( <span class="string">"counterclockwise"</span> )

        <span class="keyword">end</span> <span class="comment">% onRotateCounterclockwiseButtonPushed</span>

        <span class="keyword">function</span> onGridSelected( obj, s, ~ )
            <span class="comment">%ONGRIDSELECTED Enable/disable the grid.</span>

            checked = s.Value;
            <span class="keyword">if</span> checked
                obj.GridVisible = <span class="string">"on"</span>;
            <span class="keyword">else</span>
                obj.GridVisible = <span class="string">"off"</span>;
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% onGridSelected</span>

        <span class="keyword">function</span> onColorbarSelected( obj, s, ~ )
            <span class="comment">%ONCOLORBARSELECTED Enable/disable the colorbar.</span>

            checked = s.Value;
            <span class="keyword">if</span> checked
                obj.colorbar;
            <span class="keyword">else</span>
                obj.colorbar( <span class="string">"off"</span> );
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% onColorbarSelected</span>

        <span class="keyword">function</span> onTicksCheckBoxSelected( obj, ~, ~ )
            <span class="comment">%ONTICKSCHECKBOXSELECTED Show/hide the ticks.</span>

            set( obj.Ticks, <span class="string">"Visible"</span>, obj.TicksCheckBox.Value )

        <span class="keyword">end</span> <span class="comment">% onTicksCheckBoxSelected</span>

        <span class="keyword">function</span> onSufaceTypeSelected( obj, s, ~ )
            <span class="comment">%ONSURFACETYPESELECTED Update the surface type.</span>

            obj.SurfaceType = s.Value;

        <span class="keyword">end</span> <span class="comment">% onSurfaceTypeSelected</span>

        <span class="keyword">function</span> onInterpolationMethodSelected( obj, s, ~ )
            <span class="comment">%ONINTERPOLATIONMETHODSELECTED Update the surface type.</span>

            <span class="comment">% Mark the chart for an update.</span>
            obj.ComputationRequired = true;

            <span class="comment">% Assign the InterpolationMethod.</span>
            obj.InterpolationMethod_ = s.Value;

        <span class="keyword">end</span> <span class="comment">% onInterpolationMethodSelected</span>

        <span class="keyword">function</span> onFaceAlphaSelected( obj, s, ~ )
            <span class="comment">%ONFACEALPHASELECTED Update the face alpha.</span>

            set( obj.Surface, <span class="string">"FaceAlpha"</span>, s.Value )
            obj.FaceAlphaSlider.Tooltip = string( s.Value );

        <span class="keyword">end</span> <span class="comment">% onFaceAlphaSelected</span>

        <span class="keyword">function</span> onLineWidthSelected( obj, s, ~ )
            <span class="comment">%ONLINEWIDTHSELECTED Update the line width.</span>

            set( obj.Surface, <span class="string">"LineWidth"</span>, s.Value )
            obj.LineWidthSlider.Tooltip = string( s.Value );

        <span class="keyword">end</span> <span class="comment">% onLineWidthSelected</span>

        <span class="keyword">function</span> onScatterMarkerSelected( obj, s, ~ )
            <span class="comment">%ONSCATTERMARKERSELECTED Update the chart when the scatter plot</span>
            <span class="comment">%marker style is selected interactively.</span>

            obj.ScatterSeries.Marker = s.Value;

        <span class="keyword">end</span> <span class="comment">% onScatterMarkerSelected</span>

        <span class="keyword">function</span> onMarkerSizeSelected( obj, s, ~ )
            <span class="comment">%ONMARKERSIZESELECTED Update the marker size when the user</span>
            <span class="comment">%interacts with the slider.</span>

            obj.ScatterSeries.MarkerSize = s.Value;
            obj.ScatterSizeDataSlider.Tooltip = string( s.Value );

        <span class="keyword">end</span> <span class="comment">% onMarkerSizeSelected</span>

        <span class="keyword">function</span> [x, y] = tern2cart( obj, A, B, C )
            <span class="comment">%TERN2CART Convert the ternary coordinates (A, B, C) to</span>
            <span class="comment">%Cartesian coordinates (x, y).</span>

            <span class="keyword">if</span> obj.Direction_ ~= <span class="string">"clockwise"</span>
                y = C * sind( 60 );
                x = A + y * cotd( 60 ) - 1/2;
            <span class="keyword">else</span>
                y = B * sind( 60 );
                x = 1 - A - y * cotd( 60 ) - 1/2;
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% tern2cart</span>

        <span class="keyword">function</span> [A, B, C] = cart2tern( obj )
            <span class="comment">%CART2TERN Convert Cartesian coordinates (x, y) to ternary</span>
            <span class="comment">%coordinates (A, B, C).</span>

            x = obj.Surface.XData;
            y = obj.Surface.YData;

            <span class="keyword">if</span> obj.Direction_ ~= <span class="string">"clockwise"</span>
                A = x - y .* cotd( 60 ) - 1/2;
                C = y ./ sind( 60 );
                B = 1 - A - C;
            <span class="keyword">else</span>
                A = 1 - x - y * cotd( 60 ) - 1/2;
                B = y ./ sind( 60 );
                C = 1 - A - B;
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% cart2tern</span>

        <span class="keyword">function</span> [f, x, y, z] = data2cart( obj )
            <span class="comment">%DATA2CART Compute Cartesian coordinates from the chart data.</span>

            <span class="comment">% Compute fractional values for each data point.</span>
            f = obj.Data_{:, :} ./ sum( obj.Data_{:, 1:3}, 2 );
            z = obj.Data_{:, 4};

            <span class="comment">% Convert the ternary coordinates to Cartesian coordinates.</span>
            [x, y] = tern2cart( obj, f(:, 1), f(:, 2), f(:, 3) );
            [x, sortIdx] = sort( x );
            y = y(sortIdx);
            z = z(sortIdx);

        <span class="keyword">end</span> <span class="comment">% data2cart</span>

        <span class="keyword">function</span> [xg, yg, zg] = tridata( obj )
            <span class="comment">%TRIDATA Calculate the xg, yg and zg values used for trisurf.</span>

            <span class="comment">% First, compute the Cartesian coordinates.</span>
            [f, x, y, z] = data2cart( obj );
            <span class="comment">% We have x, y, z as vector data. Use meshgrid to create a</span>
            <span class="comment">% grid.</span>
            Ar = linspace( min( f(:, 1) ), max( f(:, 1) ), <span class="keyword">...</span>
                obj.GridResolution_+1 );
            Br = linspace( min( f(:, 2) ), max( f(:, 2) ), <span class="keyword">...</span>
                obj.GridResolution_+1 );
            [Ag, Bg] = meshgrid( Ar, Br );
            Cg = 1 - (Ag + Bg);
            [xg, yg] = tern2cart( obj, Ag, Bg, Cg );

            <span class="comment">% Use griddata to get an array compatible with trisurf.</span>
            zg = griddata(x, y, z, xg, yg, obj.InterpolationMethod_);
            zg(Ag + Bg &gt; 1) = NaN;

        <span class="keyword">end</span> <span class="comment">% tridata</span>

        <span class="keyword">function</span> ticks = createTicks( obj )
            <span class="comment">%CREATETICKS Create ticks around the chart's axes.</span>

            tickPos = 1 : obj.TickRate_ : obj.GridResolution_;
            ticks(numel( tickPos ), 3) = matlab.graphics.primitive.Text;

            <span class="keyword">switch</span> obj.Direction_

                <span class="keyword">case</span> <span class="string">"clockwise"</span>

                    ticks(:, 1) = text( obj.Axes, <span class="keyword">...</span>
                        1/2 - (tickPos-1) ./ obj.GridResolution_, <span class="keyword">...</span>
                        -0.03 * ones( 1, numel( tickPos ) ), <span class="keyword">...</span>
                        num2str( round( (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_, 2 ).' ), <span class="keyword">...</span>
                        <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span> );
                    ticks(:, 2) = text( obj.Axes, <span class="keyword">...</span>
                        -1/2 + 1/2 * (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_ - 0.03, <span class="keyword">...</span>
                        sqrt( 3 ) / 2 * (tickPos-1) <span class="keyword">...</span>
                        / obj.GridResolution_, <span class="keyword">...</span>
                        num2str( round( (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_, 2 ).' ), <span class="keyword">...</span>
                        <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span>, <span class="keyword">...</span>
                        <span class="string">"Rotation"</span>, 60 );
                    ticks(:, 3) = text( obj.Axes, <span class="keyword">...</span>
                        1/2 * (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_ + 0.03, <span class="keyword">...</span>
                        sqrt( 3 ) / 2 * <span class="keyword">...</span>
                        (1 - (tickPos-1) ./ obj.GridResolution_ ), <span class="keyword">...</span>
                        num2str( round( (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_, 2 ).' ), <span class="keyword">...</span>
                        <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span>, <span class="keyword">...</span>
                        <span class="string">"Rotation"</span>, -60 );

                <span class="keyword">case</span> <span class="string">"counterclockwise"</span>

                    ticks(tickPos, 1) = text( obj.Axes, <span class="keyword">...</span>
                        - 1/2 + (tickPos-1) ./ obj.GridResolution_, <span class="keyword">...</span>
                        -0.03 * ones( 1, numel( tickPos ) ), <span class="keyword">...</span>
                        num2str( round( (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_, 2 ).' ), <span class="keyword">...</span>
                        <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span> );
                    ticks(tickPos, 2) = text( obj.Axes, <span class="keyword">...</span>
                        - 1/2 * (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_ - 0.03, <span class="keyword">...</span>
                        sqrt( 3 ) / 2 * (1 - (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_ ), <span class="keyword">...</span>
                        num2str( round( (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_, 2 ).' ), <span class="keyword">...</span>
                        <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span>, <span class="keyword">...</span>
                        <span class="string">"Rotation"</span>, 60 );
                    ticks(tickPos, 3) = text( obj.Axes, <span class="keyword">...</span>
                        1/2 - 1/2 * (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_ + 0.03, <span class="keyword">...</span>
                        sqrt( 3 ) / 2 * (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_, <span class="keyword">...</span>
                        num2str( round( (tickPos-1) ./ <span class="keyword">...</span>
                        obj.GridResolution_, 2 ).' ), <span class="keyword">...</span>
                        <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span>, <span class="keyword">...</span>
                        <span class="string">"Rotation"</span>, -60 );

            <span class="keyword">end</span> <span class="comment">% switch/case</span>

            set( ticks, <span class="string">"Visible"</span>, obj.ShowTicks )

        <span class="keyword">end</span> <span class="comment">% createTicks</span>

        <span class="keyword">function</span> [x, y] = gridcoords( obj )
            <span class="comment">%GRIDCOORDS Compute the grid coordinates.</span>

            <span class="comment">% Create an equally-spaced vector.</span>
            t = 1 : (obj.GridResolution_-1);

            <span class="comment">% First, assemble the x-coordinates.</span>
            x1 = [1/2 - t / obj.GridResolution_;
                -1/2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            x2 = [1/2 - t / obj.GridResolution_;
                1/2 - 1/2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            x3 = [-1/2 + 1/2 * t / obj.GridResolution_;
                1/2 - 1/2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            x = [x1; x2; x3];
            x = x(:);

            <span class="comment">% Next, assemble the y-coordinates.</span>
            y1 = [zeros( 1, obj.GridResolution_-1 );
                sqrt( 3 ) / 2 * (1 - t / obj.GridResolution_);
                NaN( 2, obj.GridResolution_-1 )];
            y2 = [zeros( 1, obj.GridResolution_-1 );
                sqrt( 3 ) / 2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            y3 = [sqrt( 3 ) / 2 * t / obj.GridResolution_;
                sqrt( 3 ) / 2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            y = [y1; y2; y3];
            y = y(:);

        <span class="keyword">end</span> <span class="comment">% gridcoords</span>

    <span class="keyword">end</span> <span class="comment">% methods ( Access = private )</span>

<span class="keyword">end</span> <span class="comment">% classdef</span>

<span class="keyword">function</span> tc = tricoords( N )
<span class="comment">%TRICOORDS Triangulate each square.</span>

[X, Y] = meshgrid( 1:N-1 );
bottomLeft = sub2ind( [N, N], X, Y );
bottomLeft = bottomLeft(:);
bottomRight = bottomLeft + 1;
topLeft = bottomLeft + N;
topRight = topLeft + 1;
tc = [topLeft, bottomLeft, bottomRight;
    topLeft, topRight, bottomRight];

<span class="keyword">end</span> <span class="comment">% tricoords</span>

<span class="keyword">function</span> t = defaultTernaryData()
<span class="comment">%DEFAULTTERNARYDATA Create a default table containing ternary data.</span>

t = table( 0, 0, 1, 1 );
t.Properties.VariableNames = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"Z"</span>];

<span class="keyword">end</span> <span class="comment">% defaultTernaryData</span>

<span class="keyword">function</span> mustBeTernaryData( t )
<span class="comment">%MUSTBETERNARYDATA Validate that the input value t is a table containing</span>
<span class="comment">%ternary data in the required form.</span>

<span class="keyword">if</span> ~isempty( t )

    <span class="comment">% Validate the required attributes of the table variables.</span>
    Adata = t{:, 1};
    mustBeFiniteNonnegativeDoubleVector( Adata )

    Bdata = t{:, 2};
    mustBeFiniteNonnegativeDoubleVector( Bdata )

    Cdata = t{:, 3};
    mustBeFiniteNonnegativeDoubleVector( Cdata )

    Zdata = t{:, 4};
    mustBeFiniteDoubleVector( Zdata )

<span class="keyword">end</span> <span class="comment">% if</span>

    <span class="keyword">function</span> mustBeFiniteNonnegativeDoubleVector( v )

        mustBeFiniteDoubleVector( v )
        mustBeNonnegative( v )

    <span class="keyword">end</span> <span class="comment">% mustBeFiniteNonnegativeDoubleVector</span>

    <span class="keyword">function</span> mustBeFiniteDoubleVector( v )

        mustBeA( v, <span class="string">"double"</span> )
        mustBeVector( v )
        mustBeFinite( v )

    <span class="keyword">end</span> <span class="comment">% mustBeFiniteDoubleVector</span>

<span class="keyword">end</span> <span class="comment">% mustBeTernaryData</span>
</pre>
</div>
<!--
##### SOURCE BEGIN #####
classdef TernaryChart < Component
    %TERNARYCHART Chart managing a barycentric plot of three variables
    %which sum to a constant.

    % Copyright 2018-2025 The MathWorks, Inc.

    properties ( Dependent )
        % Table of data: columns 1-3 are inputs and column 4 is the output.
        Data(:, 4) table {mustBeTernaryData}
        % Resolution of the grid.
        GridResolution(1, 1) double {mustBePositive, mustBeInteger}
        % Tick rate.
        TickRate(1, 1) double {mustBePositive, mustBeInteger}
        % Direction of the ternary plot.
        Direction(1, 1) string {mustBeMember( Direction, ...
            ["clockwise", "counterclockwise"] )}
    end % properties ( Dependent )

    properties ( Dependent )
        % Scatter series marker.
        Marker(1, 1) string {mustBeMarker} = "."
        % Scatter series marker size.
        MarkerSize(1, 1) double {mustBePositive, mustBeFinite} = 36
        % Scatter series marker edge color.
        MarkerEdgeColor = "flat"
        % Scatter series marker face color.
        MarkerFaceColor = "none"
        % Surface face color.
        FaceColor = "flat"
        % Surface edge color.
        EdgeColor = [0, 0, 0]
        % Surface face alpha.
        FaceAlpha(1, 1) double {mustBeInRange( FaceAlpha, 0, 1 )} = 1
        % Surface edge alpha.
        EdgeAlpha(1, 1) double {mustBeInRange( EdgeAlpha, 0, 1 )} = 1
        % Surface line style.
        LineStyle(1, 1) string {mustBeLineStyle} = "-"
        % Surface line width.
        LineWidth(1, 1) double {mustBePositive, mustBeFinite} = 0.5
        % Surface face lighting.
        FaceLighting(1, 1) string {mustBeLighting} = "flat"
        % Surface edge lighting.
        EdgeLighting(1, 1) string {mustBeLighting} = "none"
        % Tick visibility.
        ShowTicks(1, 1) matlab.lang.OnOffSwitchState = "on"
    end % properties ( Dependent )

    properties ( Dependent )
        % Axis line width.
        AxisLineWidth(1, 1) double {mustBePositive, mustBeFinite}
        % Grid visibility.
        GridVisible(1, 1) matlab.lang.OnOffSwitchState
        % Grid line width.
        GridLineWidth(1, 1) double {mustBePositive, mustBeFinite}
        % Scatter series visibility.
        ScatterVisible(1, 1) matlab.lang.OnOffSwitchState
        % Colorbar visibility.
        ColorbarVisible(1, 1) matlab.lang.OnOffSwitchState
        % Visibility of the chart controls.
        Controls(1, 1) matlab.lang.OnOffSwitchState
    end % properties ( Dependent )

    properties ( Dependent, AbortSet )
        % Surface type.
        SurfaceType(1, 1) string {mustBeMember( SurfaceType, ...
            ["surface", "mesh"] )}
        % Surface interpolation method.
        InterpolationMethod(1, 1) string ...
            {mustBeMember( InterpolationMethod, ...
            ["linear", "nearest", "natural", "cubic", "v4"] )}
    end % properties ( Dependent, AbortSet )

    properties ( Access = private )
        % Internal storage for the data property.
        Data_(:, 4) table {mustBeTernaryData} = defaultTernaryData()
        % Internal storage for the grid resolution.
        GridResolution_(1, 1) double {mustBePositive, mustBeInteger} = 10
        % Internal storage for the tick rate.
        TickRate_(1, 1) double {mustBePositive, mustBeInteger} = 1
        % Internal storage for the SurfaceType property.
        SurfaceType_(1, 1) string {mustBeMember( SurfaceType_, ...
            ["surface", "mesh"] )} = "surface"
        % Internal storage for Ternary direction.
        Direction_(1, 1) string {mustBeMember( Direction_, ...
            ["clockwise", "counterclockwise"] )} = "clockwise"
        % Internal storage for the interpolation method.
        InterpolationMethod_(1, 1) string ...
            {mustBeMember( InterpolationMethod_, ...
            ["linear", "nearest", "natural", "cubic", "v4"] )} = "v4"
        % Logical scalar specifying whether a computation is required.
        ComputationRequired(1, 1) logical = false
        % Internal storage to record resolution modification.
        ResolutionModified(1, 1) logical = false
    end % properties ( Access = private )

    properties ( Access = private, Transient, NonCopyable )
        % Chart layout.
        LayoutGrid(:, 1) matlab.ui.container.GridLayout ...
            {mustBeScalarOrEmpty}
        % Chart axes.
        Axes(:, 1) matlab.graphics.axis.Axes {mustBeScalarOrEmpty}
        % Triangular axes boundary.
        LineAxis(:, 1) matlab.graphics.primitive.Line {mustBeScalarOrEmpty}
        % Triangular grid.
        Grid(:, 1) matlab.graphics.primitive.Line {mustBeScalarOrEmpty}
        % Axes ticks.
        Ticks(:, 3) matlab.graphics.primitive.Text
        % Toggle button for the chart controls.
        ToggleButton(:, 1) matlab.ui.controls.ToolbarStateButton ...
            {mustBeScalarOrEmpty}
        % Ternary surface.
        Surface(:, 1) matlab.graphics.primitive.Patch {mustBeScalarOrEmpty}
        % 3D scattered data, plotted using a line object.
        ScatterSeries(:, 1) matlab.graphics.primitive.Line ...
            {mustBeScalarOrEmpty}
        % Internal storage for the x-axis label property.
        XLabel(:, 1) matlab.graphics.primitive.Text {mustBeScalarOrEmpty}
        % Internal storage for the y-axis (left and right) label property.
        YLabel(1, 2) matlab.graphics.primitive.Text
        % Internal storage for the z-axis label property.
        ZLabel(:, 1) matlab.graphics.primitive.Text {mustBeScalarOrEmpty}
        % Pushbutton for rotating the axes clockwise.
        RotateClockwiseButton(:, 1) matlab.ui.control.Button ...
            {mustBeScalarOrEmpty}
        % Pushbutton for rotating the axes conterclockwise.
        RotateCounterclockwiseButton(:, 1) matlab.ui.control.Button ...
            {mustBeScalarOrEmpty}
        % Check box for the axes' colorbar.
        ColorbarCheckBox(:, 1) matlab.ui.control.CheckBox ...
            {mustBeScalarOrEmpty}
        % Check box for the axes' grid visibility.
        GridCheckBox(:, 1) matlab.ui.control.CheckBox {mustBeScalarOrEmpty}
        % Check box for the tick visibility.
        TicksCheckBox(:, 1) matlab.ui.control.CheckBox ...
            {mustBeScalarOrEmpty}        
        % Dropdown menu for selecting the surface type.
        SurfaceTypeDropDown(:, 1) matlab.ui.control.DropDown ...
            {mustBeScalarOrEmpty}
        % Dropdown menu for selecting the interpolation method.
        InterpolationMethodDropDown(:, 1) matlab.ui.control.DropDown ...
            {mustBeScalarOrEmpty}
        % Dropdown menu for selecting the Face Color of the surface.
        FaceAlphaSlider(:, 1) matlab.ui.control.Slider ...
            {mustBeScalarOrEmpty}
        % Slider for selecting the Edge Alpha of the surface.
        LineWidthSlider(:, 1) matlab.ui.control.Slider ...
            {mustBeScalarOrEmpty}
        % Dropdown menu for selecting the scatter plot marker.
        ScatterMarkerDropDown(:, 1) matlab.ui.control.DropDown ...
            {mustBeScalarOrEmpty}
        % Slider for selecting the marker size of the scatter series.
        ScatterSizeDataSlider(:, 1) matlab.ui.control.Slider ...
            {mustBeScalarOrEmpty}
    end % properties ( Access = private, Transient, NonCopyable )

    properties ( Constant, Hidden )
        % Product dependencies.
        Dependencies(1, :) string = "MATLAB"
        % Description.
        ShortDescription(1, 1) string = "Barycentric plot of three" + ...
            " variables summing to a constant"
    end % properties ( Constant, Hidden )

    methods

        function value = get.Data( obj )

            value = obj.Data_;

        end % get.Data

        function set.Data( obj, value )

            % Mark the chart for an update.
            obj.ComputationRequired = true;

            % Set the internal data property.
            obj.Data_ = value;

            % Update the axes.
            obj.Axes.DataAspectRatio = ...
                [1, 1, 2 * (max( value{:, 4} ) - min( value{:, 4} ))];

        end % set.Data

        function value = get.GridResolution( obj )

            value = obj.GridResolution_;

        end % get.GridResolution

        function set.GridResolution( obj, value )

            % Mark the chart for an update.
            obj.ComputationRequired = true;

            % Set the internal data property.
            obj.GridResolution_ = value;
            obj.ResolutionModified = true;

        end % set.GridResolution

        function value = get.TickRate( obj )

            value = obj.TickRate_;

        end % get.TickRate

        function set.TickRate( obj, value )

            % Mark the chart for an update.
            obj.ComputationRequired = true;

            % Set the internal data property.
            obj.TickRate_ = value;

        end % set.TickRate

        function value = get.ShowTicks( obj )

            value = obj.TicksCheckBox.Value;

        end % get.ShowTicks

        function set.ShowTicks( obj, value )

            obj.TicksCheckBox.Value = value;
            obj.onTicksCheckBoxSelected()

        end % set.ShowTicks

        function value = get.SurfaceType( obj )

            value = obj.SurfaceType_;

        end % get.SurfaceType

        function set.SurfaceType( obj, value )

            % Mark the chart for an update.
            obj.ComputationRequired = true;

            % Assign the SurfaceType.
            obj.SurfaceType_ = value;

            % Make sure the dropdown is up-to-date.
            obj.SurfaceTypeDropDown.Value = value;

            switch value
                case "surface"
                    obj.FaceColor = "flat";
                    obj.EdgeColor = [0, 0, 0];
                    obj.FaceAlpha = 1;
                    obj.FaceLighting = "flat";
                    obj.EdgeLighting = "none";
                case "mesh"
                    obj.EdgeColor = ...
                        get( obj.Axes, "defaultSurfaceFaceColor" );
                    obj.FaceAlpha = 0;
                    obj.FaceLighting = "none";
                    obj.EdgeLighting = "flat";
            end % switch/case

        end % set.SurfaceType

        function value = get.InterpolationMethod( obj )

            value = obj.InterpolationMethod_;

        end % get.InterpolationMethod

        function set.InterpolationMethod( obj, value )

            % Mark the chart for an update.
            obj.ComputationRequired = true;

            % Set the interpolation method.
            obj.InterpolationMethod_ = value;

            % Make sure the dropdown is up-to-date.
            obj.InterpolationMethodDropDown.Value = value;

        end % set.InterpolationMethod

        function value = get.Direction( obj )

            value = obj.Direction_;

        end % get.Direction

        function set.Direction( obj, value )

            % Mark the chart for an update.
            obj.ComputationRequired = true;

            % Set the internal data property.
            obj.Direction_ = value;

        end % set.Direction

        function value = get.FaceColor( obj )

            value = obj.Surface.FaceColor;

        end % get.FaceColor

        function set.FaceColor( obj, value )

            % Set the property.
            obj.Surface.FaceColor = value;

        end % set.FaceColor

        function value = get.EdgeColor( obj )

            value = obj.Surface.EdgeColor;

        end % get.EdgeColor

        function set.EdgeColor( obj, value )

            % Validate.
            value = convertCharsToStrings( value );
            if ~isstring( value ) || ~ismember( value, ["flat", "none"] )
                value = validatecolor( value );
            end % if

            % Set the property.
            obj.Surface.EdgeColor = value;

        end % set.EdgeColor

        function value = get.FaceAlpha( obj )

            value = obj.Surface.FaceAlpha;

        end % get.FaceAlpha

        function set.FaceAlpha( obj, value )

            % Set the property.
            obj.Surface.FaceAlpha = value;

            % Make sure the slider is up-to-date
            obj.FaceAlphaSlider.Value = value;
            obj.FaceAlphaSlider.Tooltip = string( value );

        end % set.FaceAlpha

        function value = get.EdgeAlpha( obj )

            value = obj.Surface.EdgeAlpha;

        end % get.EdgeAlpha

        function set.EdgeAlpha( obj, value )

            % Set the property.
            obj.Surface.EdgeAlpha = value;

        end % set.EdgeAlpha

        function value = get.LineStyle( obj )

            value = obj.Surface.LineStyle;

        end % get.LineStyle

        function set.LineStyle( obj, value )

            % Set the property.
            obj.Surface.LineStyle = value;

        end % set.LineStyle

        function value = get.LineWidth( obj )

            value = obj.Surface.LineWidth;

        end % get.LineWidth

        function set.LineWidth( obj, value )

            % Set the property.
            obj.Surface.LineWidth = value;

            % Make sure the slider is up-to-date.
            obj.LineWidthSlider.Value = value;
            obj.LineWidthSlider.Tooltip = string( value );

        end % set.LineWidth

        function value = get.FaceLighting( obj )

            value = obj.Surface.FaceLighting;

        end % get.FaceLighting

        function set.FaceLighting( obj, value )

            % Set the Surface property.
            obj.Surface.FaceLighting = value;

        end % set.FaceLighting

        function value = get.EdgeLighting( obj )

            value = obj.Surface.EdgeLighting;

        end % get.EdgeLighting

        function set.EdgeLighting( obj, value )

            % Set the Surface property.
            obj.Surface.EdgeLighting = value;

        end % set.EdgeLighting

        function value = get.Marker( obj )

            value = obj.ScatterSeries.Marker;

        end % get.Marker

        function set.Marker( obj, value )

            % Set the property.
            obj.ScatterSeries.Marker = value;

            % Make sure the dropdown is up-to-date.
            obj.ScatterMarkerDropDown.Value = value;

        end % set.Marker

        function value = get.MarkerSize( obj )

            value = obj.ScatterSeries.MarkerSize;

        end % get.MarkerSize

        function set.MarkerSize( obj, value )

            % Set the Scatter property.
            obj.ScatterSeries.MarkerSize = value;

            % Make sure the dropdown is up-to-date
            obj.ScatterSizeDataSlider.Value = value;

        end % set.MarkerSize

        function value = get.MarkerEdgeColor( obj )

            value = obj.ScatterSeries.MarkerEdgeColor;

        end % get.MarkerEdgeColor

        function set.MarkerEdgeColor( obj, value )

            % Validate.
            value = convertCharsToStrings( value );
            if ~isstring( value ) || ~ismember( value, ["flat", "none"] )
                value = validatecolor( value );
            end % if

            % Set the property.
            obj.ScatterSeries.MarkerEdgeColor = value;

        end % set.MarkerEdgeColor

        function value = get.MarkerFaceColor( obj )

            value = obj.ScatterSeries.MarkerFaceColor;

        end % get.MarkerFaceColor

        function set.MarkerFaceColor( obj, value )

            % Validate.
            value = convertCharsToStrings( value );
            if ~isstring( value ) || ~ismember( value, ["flat", "none"] )
                value = validatecolor( value );
            end % if

            % Set the property.
            obj.ScatterSeries.MarkerFaceColor = value;

        end % set.MarkerFaceColor

        function value = get.AxisLineWidth( obj )

            value = obj.LineAxis.LineWidth;

        end % get.AxisLineWidth

        function set.AxisLineWidth( obj, value )

            % Set the Axis property.
            obj.LineAxis.LineWidth = value;

        end % set.AxisLineWidth

        function value = get.GridVisible( obj )

            value = obj.Grid.Visible;

        end % get.GridVisible

        function set.GridVisible( obj, value )

            % Set the Grid property.
            obj.Grid.Visible = value;

            % Ensure the grid check box is up-to-date.
            obj.GridCheckBox.Value = value;

        end % set.GridVisible

        function value = get.GridLineWidth( obj )

            value = obj.Grid.LineWidth;

        end % get.GridLineWidth

        function set.GridLineWidth( obj, value )

            % Set the Grid property.
            obj.Grid.LineWidth = value;

        end % set.GridLineWidth

        function value = get.ScatterVisible( obj )

            value = obj.ScatterSeries.Visible;

        end % get.ScatterVisible

        function set.ScatterVisible( obj, value )

            % Set the Scatter property.
            obj.ScatterSeries.Visible = value;

        end % set.ScatterVisible

        function value = get.ColorbarVisible( obj )

            value = obj.Axes.Colorbar;

        end % get.ColorbarVisible

        function set.ColorbarVisible( obj, value )

            if value
                obj.colorbar();
            else
                obj.colorbar( "off" )
            end % if

        end % set.ColorbarVisible

        function value = get.Controls( obj )

            value = obj.ToggleButton.Value;

        end % get.Controls

        function set.Controls( obj, value )

            % Update the toggle button.
            obj.ToggleButton.Value = value;

            % Invoke the toggle button callback.
            obj.onToggleButtonPressed()

        end % set.Controls

    end % methods

    methods

        function obj = TernaryChart( namedArgs )
            %TERNARYCHART Construct a TernaryChart object, given optional
            %name-value arguments.

            arguments ( Input )
                namedArgs.?TernaryChart
            end % arguments ( Input )           

            % Set any user-defined properties.
            set( obj, namedArgs )

        end % constructor

        function xlabel( obj, newlabel, namedArgs )
            %XLABEL Add an x-label to the chart.

            arguments
                obj(1, 1) TernaryChart
                newlabel(1, 1) string
                namedArgs.?matlab.graphics.primitive.Text
            end % arguments

            propertyCell = namedargs2cell( namedArgs );
            set( obj.XLabel, "String", newlabel, propertyCell{:} )

        end % xlabel

        function ylabel( obj, side, newlabel, namedArgs )
            %YLABEL Add left/right y-labels to the chart.

            arguments
                obj(1, 1) TernaryChart
                side (1, 1) string {mustBeMember( side, ...
                    ["right", "left"])}
                newlabel(1, 1) string
                namedArgs.?matlab.graphics.primitive.Text
            end % arguments

            propertyCell = namedargs2cell( namedArgs );

            switch side
                case "left"
                    set( obj.YLabel(1, 1), ...
                        "String", newlabel, propertyCell{:} )
                case "right"
                    set( obj.YLabel(1, 2), ...
                        "String", newlabel,  propertyCell{:} )
            end % switch/case

        end % ylabel

        function zlabel( obj, newlabel, namedArgs )
            %ZLABEL Add a z-label to the chart.

            arguments
                obj(1, 1) TernaryChart
                newlabel(1, 1) string
                namedArgs.?matlab.graphics.primitive.Text
            end % arguments

            propertyCell = namedargs2cell(namedArgs);
            set( obj.ZLabel, "String", newlabel, propertyCell{:} );

        end % zlabel

        function varargout = title( obj, varargin )

            [varargout{1:nargout}] = title( obj.Axes, varargin{:} );

        end % title

        function varargout = colorbar( obj, varargin )

            % Call the colorbar function on the chart's axes.
            [varargout{1:nargout}] = colorbar( obj.Axes, varargin{:} );

            % Ensure the colorbar check box is up-to-date.
            obj.ColorbarCheckBox.Value = ~isempty( obj.Axes.Colorbar );

        end % colorbar

        function varargout = colormap( obj, varargin )

            [varargout{1:nargout}] = colormap( obj.Axes, varargin{:} );

        end % colormap

        function varargout = view( obj, varargin )

            [varargout{1:nargout}] = view( obj.Axes, varargin{:} );

        end % view

        function rotate( obj, dir )
            %ROTATE Rotate the chart in the specified direction.

            arguments
                obj(1, 1) TernaryChart
                dir(1, 1) string ...
                    {mustBeMember( dir, ...
                    ["clockwise", "counterclockwise"] )}
            end % arguments

            labels = [string( obj.XLabel.String );
                string( obj.YLabel(1, 1).String );
                string( obj.YLabel(1, 2).String )];

            switch dir
                
                case "clockwise"
                    
                    obj.Data = obj.Data_(:, [3, 1, 2, 4]);
                    obj.xlabel( labels(3, :) )
                    obj.ylabel( "left", labels(1, :) )
                    obj.ylabel( "right", labels(2, :) )

                case "counterclockwise"
                    
                    obj.Data = obj.Data_(:, [2, 3, 1, 4]);
                    obj.xlabel( labels(2, :) )
                    obj.ylabel( "left", labels(3, :) )
                    obj.ylabel( "right", labels(1, :) )

            end % switch/case

        end % rotate

        function swapdata( obj, pos1, pos2 )
            %SWAPDATA Interchange two chart data variables.

            arguments
                obj(1, 1) TernaryChart
                pos1(1, 1) double {mustBeMember(pos1, 1:3)}
                pos2(1, 1) double {mustBeMember(pos2, 1:3)}
            end % arguments

            % The positions correspond to:
            % 1) x-axis
            % 2) yleft-axis
            % 3) yright-axis
            obj.Data(:, [pos1, pos2]) = obj.Data(:, [pos2, pos1]);
            obj.Data.Properties.VariableNames([pos1, pos2]) = ...
                obj.Data.Properties.VariableNames([pos2, pos1]);
            labels = [obj.XLabel.String;
                obj.YLabel(1, 1).String;
                obj.YLabel(1, 2).String];
            labels([pos1, pos2]) = labels([pos2, pos1]);
            obj.xlabel( labels(1, :) )
            obj.ylabel( "left", labels(2, :) )
            obj.ylabel( "right", labels(3, :) )

        end % swapdata

        function resetLabels( obj )

            % Modify the labels to match the table headers
            obj.XLabel.String = obj.Data_.Properties.VariableNames{1};
            obj.YLabel(1, 1).String = ...
                obj.Data_.Properties.VariableNames{2};
            obj.YLabel(1, 2).String = ...
                obj.Data_.Properties.VariableNames{3};
            obj.ZLabel.String = obj.Data_.Properties.VariableNames{4};

        end % resetLabels

        function exportgraphics( obj, varargin )

            exportgraphics( obj.Axes, varargin{:} )

        end % exportgraphics

    end % methods

    methods ( Access = protected )

        function setup( obj )
            %SETUP Initialize the chart graphics.

            % Define the layout grid.
            obj.LayoutGrid = uigridlayout( obj, [1, 2], ...
                "ColumnWidth", ["1x", "0x"] );

            % Create the chart's axes.
            obj.Axes = axes( "Parent", obj.LayoutGrid, ...
                "DataAspectRatioMode", "manual", ...
                "Visible", "off", ...
                "NextPlot", "add" );
            obj.Axes.Title.Visible = "on";
            obj.ResolutionModified = false;

            % Create the chart's labels.
            obj.XLabel = text( obj.Axes, 0, -0.08, "A", ...
                "HorizontalAlignment", "center" );
            obj.YLabel(1, 1) = text( obj.Axes, ...
                -0.45 * sin( pi/6 ) - 0.08, sqrt( 3 )/4 + 0.08, "B", ...
                "HorizontalAlignment", "center", ...
                "Rotation", 60 );
            obj.YLabel(1, 2) = text( obj.Axes, ...
                0.45 * sin( pi/6 ) + 0.08, sqrt( 3 )/4 + 0.08, "C", ...
                "HorizontalAlignment", "center", ...
                "Rotation", -60 );
            obj.ZLabel = text( obj.Axes, 0, 0.95, "Z", ...
                "HorizontalAlignment", "center" );

            % Create the grid.
            obj.Grid = line( "Parent", obj.Axes, ...
                "XData", NaN, ...
                "YData", NaN, ...
                "Color", "k", ...
                "LineWidth", 1 );

            % Add a state button to show/hide the chart's controls.
            tb = axtoolbar( obj.Axes, "default" );
            iconPath = fullfile( chartsRoot(), "charts", "images", ...
                "Cog.png" );
            obj.ToggleButton = axtoolbarbtn( tb, "state", ...
                "Value", "off", ...
                "Tooltip", "Show chart controls", ...
                "Icon", iconPath, ...
                "ValueChangedFcn", @obj.onToggleButtonPressed );

            % Create the line and surface plot.
            obj.Surface = trisurf( [], NaN, NaN, NaN, ...
                "Parent", obj.Axes );

            % Define the data tips.
            datatip( obj.Surface, "Visible", "off" );
            obj.Surface.DataTipTemplate.DataTipRows(1).Label = ...
                obj.XLabel.String;
            obj.Surface.DataTipTemplate.DataTipRows(2).Label = ...
                obj.YLabel(1, 1).String;
            obj.Surface.DataTipTemplate.DataTipRows(3).Label = ...
                obj.YLabel(1, 2).String;
            obj.Surface.DataTipTemplate.DataTipRows(4).Label = ...
                obj.ZLabel.String;

            % Create the scatter series for the data points.
            obj.ScatterSeries = line( "Parent", obj.Axes, ...
                "XData", NaN, ...
                "YData", NaN, ...
                "ZData", NaN, ...
                "Marker", ".", ...
                "MarkerSize", 5, ...
                "LineStyle", "none" );

            % Define the data tips.
            datatip( obj.ScatterSeries, "Visible", "off" );
            obj.ScatterSeries.DataTipTemplate.DataTipRows(1).Label = ...
                obj.XLabel.String;
            obj.ScatterSeries.DataTipTemplate.DataTipRows(2).Label = ...
                obj.YLabel(1, 1).String;
            obj.ScatterSeries.DataTipTemplate.DataTipRows(3).Label = ...
                obj.YLabel(1, 2).String;
            obj.ScatterSeries.DataTipTemplate.DataTipRows(4).Label = ...
                obj.ZLabel.String;

            % Create outbound triangle.
            obj.LineAxis = line( "Parent", obj.Axes, ...
                "XData", [-0.5, 0.5, 0, -0.5], ...
                "YData", [0, 0, sqrt( 3 )/2, 0], ...
                "ZData", [0, 0, 0, 0], ...
                "Color", "k", ...
                "LineWidth", 2 );

            % Name labels from initial table (or default).
            obj.resetLabels()

            % Configure the chart's axes.
            view( obj.Axes, [0 90] )

            % Add the chart controls.
            p = uipanel( "Parent", obj.LayoutGrid, ...
                "Title", "Chart Controls", ...
                "FontWeight", "bold" );
            vLayout = uigridlayout( p, [3, 1], ...
                "RowHeight", ["fit", "fit"] );

            % Add the chart controls for the axis.
            p = uipanel( "Parent", vLayout, ...
                "Title", "Axis", ...
                "FontWeight", "bold" );
            controlLayout = uigridlayout( p, [3, 2], ...
                "RowHeight", ["fit", "fit", "fit"], ...
                "ColumnWidth", ["1x", "1x"] );

            % Axis rotation controls.
            obj.RotateClockwiseButton = uibutton( ...
                "Parent", controlLayout, ...
                "Text", char( 8635 ), ...
                "FontSize", 30, ...
                "Tooltip", "Rotate clockwise", ...
                "ButtonPushedFcn", @obj.onRotateClockwiseButtonPushed );
            obj.RotateCounterclockwiseButton = uibutton( ...
                "Parent", controlLayout, ...
                "Text", char( 8634 ), ...
                "FontSize", 30, ...
                "Tooltip", "Rotate clockwise", ...
                "ButtonPushedFcn", ...
                @obj.onRotateCounterclockwiseButtonPushed );

            % Axis check boxes.
            obj.ColorbarCheckBox = uicheckbox( ...
                "Parent", controlLayout, ...
                "Value", false, ...
                "Text", "Colorbar", ...
                "Tooltip", "Hide/show colorbar", ...
                "ValueChangedFcn", @obj.onColorbarSelected );
            obj.ColorbarCheckBox.Layout.Column = [1, 2];
            obj.GridCheckBox = uicheckbox( ...
                "Parent", controlLayout, ...
                "Value", true, ...
                "Text", "Grid", ...
                "Tooltip", "Hide/show grid", ...
                "ValueChangedFcn", @obj.onGridSelected );
            obj.GridCheckBox.Layout.Column = [1, 2];
            obj.TicksCheckBox = uicheckbox( ...
                "Parent", controlLayout, ...
                "Value", true, ...
                "Text", "Show ticks", ...
                "Tooltip", "Hide/show ticks", ...
                "ValueChangedFcn", @obj.onTicksCheckBoxSelected );

            % Add controls for the surface.
            p = uipanel( "Parent", vLayout, ...
                "Title", "Surface", ...
                "FontWeight", "bold" );
            controlLayout = uigridlayout( p, [4, 2], ...
                "RowHeight", repmat( "fit", 1, 4 ), ...
                "ColumnWidth", ["1x", "1x"] );

            % Surface type selector.
            uilabel( "Parent", controlLayout, "Text", "Surface type:" );
            obj.SurfaceTypeDropDown = uidropdown( ...
                "Parent", controlLayout, ...
                "Items", ["surface", "mesh"], ...
                "Tooltip", "Select the surface type", ...
                "Value", obj.SurfaceType, ...
                "ValueChangedFcn", @obj.onSufaceTypeSelected );

            % Interpolation method selector.
            uilabel( "Parent", controlLayout, ...
                "Text", "Interpolation method:" );
            obj.InterpolationMethodDropDown = uidropdown( ...
                "Parent", controlLayout, ...
                "Items", ...
                ["linear", "nearest", "natural", "cubic", "v4"], ...
                "Tooltip", "Select the surface type", ...
                "Value", obj.InterpolationMethod, ...
                "ValueChangedFcn", @obj.onInterpolationMethodSelected );

            % Face alpha.
            uilabel( "Parent", controlLayout, "Text", "Face alpha:" );
            obj.FaceAlphaSlider = uislider( ...
                "Parent", controlLayout, ...
                "Value", 1, ...
                "Tooltip", "1", ...
                "Limits", [0, 1], ...
                "MajorTicks", [0, 0.25, 0.5, 0.75, 1], ...
                "MajorTickLabels", ["0", "0.25", "0.5", "0.75", "1"], ...
                "ValueChangedFcn", @obj.onFaceAlphaSelected );

            % Line width.
            uilabel( "Parent", controlLayout, "Text", "Line width:" );
            obj.LineWidthSlider = uislider( ...
                "Parent", controlLayout, ...
                "Value", 1, ...
                "Tooltip", "1", ...
                "Limits", [0.5, 20], ...
                "MajorTicks", [0.5, 5, 10, 15, 20], ...
                "MajorTickLabels", ["0.5", "5", "10", "15", "20"], ...
                "ValueChangedFcn", @obj.onLineWidthSelected );

            % Add controls for the scatter series.
            p = uipanel( "Parent", vLayout, ...
                "Title", "Scatter Series", ...
                "FontWeight", "bold" );
            controlLayout = uigridlayout( p, [2, 2], ...
                "RowHeight", repmat( "fit", 1, 2 ), ...
                "ColumnWidth", ["1x", "1x"] );

            % Scatter series marker type selector.
            uilabel( "Parent", controlLayout, "Text", "Marker:" );
            obj.ScatterMarkerDropDown = uidropdown( ...
                "Parent", controlLayout, ...
                "Items", set( obj.ScatterSeries, "Marker" ), ...
                "Tooltip", "Select the marker for the scatter plot", ...
                "Value", obj.ScatterSeries.Marker, ...
                "ValueChangedFcn", @obj.onScatterMarkerSelected );

            % Scatter series marker size selector.
            uilabel( "Parent", controlLayout, ...
                "Text", "Marker size:" );
            obj.ScatterSizeDataSlider = uislider( ...
                "Parent", controlLayout, ...
                "Value", 5, ...
                "Tooltip", "5", ...
                "Limits", [0.5, 40], ...
                "MajorTicks", [0.5, 10, 20, 30, 40], ...
                "MajorTickLabels", ["0.5", "10", "20", "30", "40"], ...
                "ValueChangedFcn", @obj.onMarkerSizeSelected );

        end % setup

        function update( obj )
            %UPDATE Refresh the chart graphics.

            if obj.ComputationRequired

                % Avoid any conflict when the resolution is changed.
                if obj.ResolutionModified
                    delete( obj.Surface.DataTipTemplate )
                    delete( obj.ScatterSeries.DataTipTemplate )
                    obj.ResolutionModified = false;
                end % if

                % Update the surface.
                tri = tricoords( obj.GridResolution_+1 );
                [xg, yg, zg] = tridata( obj );
                set( obj.Surface, "Vertices", [xg(:), yg(:), zg(:)], ...
                    "Faces", tri(:, :), ...
                    "FaceVertexCData", zg(:), ...
                    "Parent", obj.Axes )

                % Update the scatter series.
                if obj.ScatterVisible
                    [~, x, y, z] = data2cart( obj );
                    set( obj.ScatterSeries, "XData", x(:), ...
                        "YData", y(:), ...
                        "ZData", z(:) )
                else
                    set( obj.ScatterSeries, "XData", NaN, ...
                        "YData", NaN, ...
                        "ZData", NaN )
                end % if

                % Update the ticks.
                delete( obj.Ticks )
                obj.Ticks = createTicks( obj );

                % Update the grid.
                [x, y] = gridcoords( obj );
                set( obj.Grid, "XData", x, ...
                    "YData", y, ...
                    "LineWidth", obj.GridLineWidth, ...
                    "Visible", obj.GridVisible )

                % Update the values in the custom datatips for the surface.
                obj.Surface.DataTipTemplate.DataTipRows(1).Label = ...
                    obj.XLabel.String;
                obj.Surface.DataTipTemplate.DataTipRows(2).Label = ...
                    obj.YLabel(1, 1).String;
                obj.Surface.DataTipTemplate.DataTipRows(3).Label = ...
                    obj.YLabel(1, 2).String;
                obj.Surface.DataTipTemplate.DataTipRows(4).Label = ...
                    obj.ZLabel.String;
                [Ag, Bg, Cg] = cart2tern( obj );

                obj.Surface.DataTipTemplate.DataTipRows(1).Value = Ag;
                obj.Surface.DataTipTemplate.DataTipRows(2).Value = Bg;
                obj.Surface.DataTipTemplate.DataTipRows(3).Value = Cg;
                obj.Surface.DataTipTemplate.DataTipRows(4).Value = ...
                    obj.Surface.ZData;

                % Update the custom datatips for the scatter series.
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(1).Label = obj.XLabel.String;
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(2).Label = obj.YLabel(1, 1).String;
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(3).Label = obj.YLabel(1, 2).String;
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(4).Label = obj.ZLabel.String;
                [Ag, Bg, Cg] = cart2tern( obj );
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(1).Value = Ag;
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(2).Value = Bg;
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(3).Value = Cg;
                obj.ScatterSeries.DataTipTemplate. ...
                    DataTipRows(4).Value = obj.ScatterSeries.ZData;

                % Mark the chart clean.
                obj.ComputationRequired = false;

            end % if

        end % update

    end % methods ( Access = protected )

    methods ( Access = private )

        function onToggleButtonPressed( obj, ~, ~ )
            %ONTOGGLEBUTTONPRESSED Hide/show the chart controls.

            toggleDown = obj.ToggleButton.Value;

            if toggleDown
                % Show the controls.
                obj.LayoutGrid.ColumnWidth{2} = "fit";
                obj.ToggleButton.Tooltip = "Hide chart controls";
            else
                % Hide the controls.
                obj.LayoutGrid.ColumnWidth{2} = "0x";
                obj.ToggleButton.Tooltip = "Show chart controls";
            end % if

        end % onToggleButtonPressed

        function onRotateClockwiseButtonPushed( obj, ~, ~ )
            %ONROTATECLOCKWISEBUTTONPUSHED Allow the user to rotate the
            %chart in the clockwise direction.

            obj.rotate( "clockwise" )

        end % onRotateClockwiseButtonPushed

        function onRotateCounterclockwiseButtonPushed( obj, ~, ~ )
            %ONROTATECOUNTERCLOCKWISEBUTTONPUSHED Allow the user to
            %rotate the chart in the counterclockwise direction.

            obj.rotate( "counterclockwise" )

        end % onRotateCounterclockwiseButtonPushed

        function onGridSelected( obj, s, ~ )
            %ONGRIDSELECTED Enable/disable the grid.

            checked = s.Value;
            if checked
                obj.GridVisible = "on";
            else
                obj.GridVisible = "off";
            end % if

        end % onGridSelected

        function onColorbarSelected( obj, s, ~ )
            %ONCOLORBARSELECTED Enable/disable the colorbar.

            checked = s.Value;
            if checked
                obj.colorbar;
            else
                obj.colorbar( "off" );
            end % if

        end % onColorbarSelected

        function onTicksCheckBoxSelected( obj, ~, ~ )
            %ONTICKSCHECKBOXSELECTED Show/hide the ticks.

            set( obj.Ticks, "Visible", obj.TicksCheckBox.Value )

        end % onTicksCheckBoxSelected

        function onSufaceTypeSelected( obj, s, ~ )
            %ONSURFACETYPESELECTED Update the surface type.

            obj.SurfaceType = s.Value;

        end % onSurfaceTypeSelected

        function onInterpolationMethodSelected( obj, s, ~ )
            %ONINTERPOLATIONMETHODSELECTED Update the surface type.

            % Mark the chart for an update.
            obj.ComputationRequired = true;

            % Assign the InterpolationMethod.
            obj.InterpolationMethod_ = s.Value;

        end % onInterpolationMethodSelected

        function onFaceAlphaSelected( obj, s, ~ )
            %ONFACEALPHASELECTED Update the face alpha.

            set( obj.Surface, "FaceAlpha", s.Value )
            obj.FaceAlphaSlider.Tooltip = string( s.Value );

        end % onFaceAlphaSelected

        function onLineWidthSelected( obj, s, ~ )
            %ONLINEWIDTHSELECTED Update the line width.

            set( obj.Surface, "LineWidth", s.Value )
            obj.LineWidthSlider.Tooltip = string( s.Value );

        end % onLineWidthSelected

        function onScatterMarkerSelected( obj, s, ~ )
            %ONSCATTERMARKERSELECTED Update the chart when the scatter plot
            %marker style is selected interactively.

            obj.ScatterSeries.Marker = s.Value;

        end % onScatterMarkerSelected

        function onMarkerSizeSelected( obj, s, ~ )
            %ONMARKERSIZESELECTED Update the marker size when the user
            %interacts with the slider.

            obj.ScatterSeries.MarkerSize = s.Value;
            obj.ScatterSizeDataSlider.Tooltip = string( s.Value );

        end % onMarkerSizeSelected

        function [x, y] = tern2cart( obj, A, B, C )
            %TERN2CART Convert the ternary coordinates (A, B, C) to
            %Cartesian coordinates (x, y).

            if obj.Direction_ ~= "clockwise"
                y = C * sind( 60 );
                x = A + y * cotd( 60 ) - 1/2;
            else
                y = B * sind( 60 );
                x = 1 - A - y * cotd( 60 ) - 1/2;
            end % if

        end % tern2cart

        function [A, B, C] = cart2tern( obj )
            %CART2TERN Convert Cartesian coordinates (x, y) to ternary
            %coordinates (A, B, C).

            x = obj.Surface.XData;
            y = obj.Surface.YData;

            if obj.Direction_ ~= "clockwise"
                A = x - y .* cotd( 60 ) - 1/2;
                C = y ./ sind( 60 );
                B = 1 - A - C;
            else
                A = 1 - x - y * cotd( 60 ) - 1/2;
                B = y ./ sind( 60 );
                C = 1 - A - B;
            end % if

        end % cart2tern

        function [f, x, y, z] = data2cart( obj )
            %DATA2CART Compute Cartesian coordinates from the chart data.

            % Compute fractional values for each data point.
            f = obj.Data_{:, :} ./ sum( obj.Data_{:, 1:3}, 2 );
            z = obj.Data_{:, 4};

            % Convert the ternary coordinates to Cartesian coordinates.
            [x, y] = tern2cart( obj, f(:, 1), f(:, 2), f(:, 3) );
            [x, sortIdx] = sort( x );
            y = y(sortIdx);
            z = z(sortIdx);

        end % data2cart

        function [xg, yg, zg] = tridata( obj )
            %TRIDATA Calculate the xg, yg and zg values used for trisurf.

            % First, compute the Cartesian coordinates.
            [f, x, y, z] = data2cart( obj );
            % We have x, y, z as vector data. Use meshgrid to create a
            % grid.
            Ar = linspace( min( f(:, 1) ), max( f(:, 1) ), ...
                obj.GridResolution_+1 );
            Br = linspace( min( f(:, 2) ), max( f(:, 2) ), ...
                obj.GridResolution_+1 );
            [Ag, Bg] = meshgrid( Ar, Br );
            Cg = 1 - (Ag + Bg);
            [xg, yg] = tern2cart( obj, Ag, Bg, Cg );

            % Use griddata to get an array compatible with trisurf.
            zg = griddata(x, y, z, xg, yg, obj.InterpolationMethod_);
            zg(Ag + Bg > 1) = NaN;

        end % tridata

        function ticks = createTicks( obj )
            %CREATETICKS Create ticks around the chart's axes.

            tickPos = 1 : obj.TickRate_ : obj.GridResolution_;
            ticks(numel( tickPos ), 3) = matlab.graphics.primitive.Text;
            
            switch obj.Direction_
                
                case "clockwise"
                
                    ticks(:, 1) = text( obj.Axes, ...
                        1/2 - (tickPos-1) ./ obj.GridResolution_, ...
                        -0.03 * ones( 1, numel( tickPos ) ), ...
                        num2str( round( (tickPos-1) ./ ...
                        obj.GridResolution_, 2 ).' ), ...
                        "HorizontalAlignment", "center" );                        
                    ticks(:, 2) = text( obj.Axes, ...
                        -1/2 + 1/2 * (tickPos-1) ./ ...
                        obj.GridResolution_ - 0.03, ...
                        sqrt( 3 ) / 2 * (tickPos-1) ...
                        / obj.GridResolution_, ...
                        num2str( round( (tickPos-1) ./ ...
                        obj.GridResolution_, 2 ).' ), ...
                        "HorizontalAlignment", "center", ...                        
                        "Rotation", 60 );
                    ticks(:, 3) = text( obj.Axes, ...
                        1/2 * (tickPos-1) ./ ...
                        obj.GridResolution_ + 0.03, ...
                        sqrt( 3 ) / 2 * ...
                        (1 - (tickPos-1) ./ obj.GridResolution_ ), ...
                        num2str( round( (tickPos-1) ./ ...
                        obj.GridResolution_, 2 ).' ), ...
                        "HorizontalAlignment", "center", ...                        
                        "Rotation", -60 );
                
                case "counterclockwise"
                    
                    ticks(tickPos, 1) = text( obj.Axes, ...
                        - 1/2 + (tickPos-1) ./ obj.GridResolution_, ...
                        -0.03 * ones( 1, numel( tickPos ) ), ...
                        num2str( round( (tickPos-1) ./ ...
                        obj.GridResolution_, 2 ).' ), ...
                        "HorizontalAlignment", "center" );
                    ticks(tickPos, 2) = text( obj.Axes, ...
                        - 1/2 * (tickPos-1) ./ ...
                        obj.GridResolution_ - 0.03, ...
                        sqrt( 3 ) / 2 * (1 - (tickPos-1) ./ ...
                        obj.GridResolution_ ), ...
                        num2str( round( (tickPos-1) ./ ...
                        obj.GridResolution_, 2 ).' ), ...
                        "HorizontalAlignment", "center", ...
                        "Rotation", 60 );
                    ticks(tickPos, 3) = text( obj.Axes, ...
                        1/2 - 1/2 * (tickPos-1) ./ ...
                        obj.GridResolution_ + 0.03, ...
                        sqrt( 3 ) / 2 * (tickPos-1) ./ ...
                        obj.GridResolution_, ...
                        num2str( round( (tickPos-1) ./ ...
                        obj.GridResolution_, 2 ).' ), ...
                        "HorizontalAlignment", "center", ...
                        "Rotation", -60 );

            end % switch/case

            set( ticks, "Visible", obj.ShowTicks )

        end % createTicks

        function [x, y] = gridcoords( obj )
            %GRIDCOORDS Compute the grid coordinates.

            % Create an equally-spaced vector.
            t = 1 : (obj.GridResolution_-1);
            
            % First, assemble the x-coordinates.
            x1 = [1/2 - t / obj.GridResolution_;
                -1/2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            x2 = [1/2 - t / obj.GridResolution_;
                1/2 - 1/2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            x3 = [-1/2 + 1/2 * t / obj.GridResolution_;
                1/2 - 1/2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            x = [x1; x2; x3];
            x = x(:);
            
            % Next, assemble the y-coordinates.
            y1 = [zeros( 1, obj.GridResolution_-1 );
                sqrt( 3 ) / 2 * (1 - t / obj.GridResolution_);
                NaN( 2, obj.GridResolution_-1 )];
            y2 = [zeros( 1, obj.GridResolution_-1 );
                sqrt( 3 ) / 2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            y3 = [sqrt( 3 ) / 2 * t / obj.GridResolution_;
                sqrt( 3 ) / 2 * t / obj.GridResolution_;
                NaN( 2, obj.GridResolution_-1 )];
            y = [y1; y2; y3];
            y = y(:);

        end % gridcoords

    end % methods ( Access = private )

end % classdef

function tc = tricoords( N )
%TRICOORDS Triangulate each square.

[X, Y] = meshgrid( 1:N-1 );
bottomLeft = sub2ind( [N, N], X, Y );
bottomLeft = bottomLeft(:);
bottomRight = bottomLeft + 1;
topLeft = bottomLeft + N;
topRight = topLeft + 1;
tc = [topLeft, bottomLeft, bottomRight;
    topLeft, topRight, bottomRight];

end % tricoords

function t = defaultTernaryData()
%DEFAULTTERNARYDATA Create a default table containing ternary data.

t = table( 0, 0, 1, 1 );
t.Properties.VariableNames = ["A", "B", "C", "Z"];

end % defaultTernaryData

function mustBeTernaryData( t )
%MUSTBETERNARYDATA Validate that the input value t is a table containing
%ternary data in the required form.

if ~isempty( t )

    % Validate the required attributes of the table variables.
    Adata = t{:, 1};
    mustBeFiniteNonnegativeDoubleVector( Adata )

    Bdata = t{:, 2};
    mustBeFiniteNonnegativeDoubleVector( Bdata )

    Cdata = t{:, 3};
    mustBeFiniteNonnegativeDoubleVector( Cdata )

    Zdata = t{:, 4};
    mustBeFiniteDoubleVector( Zdata )

end % if

    function mustBeFiniteNonnegativeDoubleVector( v )

        mustBeFiniteDoubleVector( v )
        mustBeNonnegative( v )

    end % mustBeFiniteNonnegativeDoubleVector

    function mustBeFiniteDoubleVector( v )

        mustBeA( v, "double" )
        mustBeVector( v )
        mustBeFinite( v )

    end % mustBeFiniteDoubleVector

end % mustBeTernaryData
##### SOURCE END #####
-->
</body>
</html>
