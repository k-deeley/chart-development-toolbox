<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>RadarScope</title>
<meta name="generator" content="MATLAB 25.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2025-01-11">
<meta name="DC.source" content="RadarScope.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<pre class="codeinput">
<span class="keyword">classdef</span> RadarScope &lt; Component
    <span class="comment">%RADARSCOPE Component managing a radar scope and a set of blips</span>
    <span class="comment">%representing objects detected on the scope.</span>

    <span class="comment">% Copyright 2021-2025 The MathWorks, Inc.</span>

    <span class="keyword">properties</span>
        <span class="comment">% Backdrop color.</span>
        BackdropColor <span class="typesection">{validatecolor}</span> = [0.6, 1, 0]
        <span class="comment">% Blip color.</span>
        BlipColor <span class="typesection">{validatecolor}</span> = [1, 1, 1]
        <span class="comment">% Grid line width.</span>
        GridLineWidth<span class="typesection">(1, 1) double {mustBePositive, mustBeFinite}</span> = 1.5
        <span class="comment">% Grid line transparency.</span>
        GridAlpha<span class="typesection">(1, 1) double {mustBeInRange( GridAlpha, 0, 1 )}</span> = 0.25
        <span class="comment">% Specify whether the lamp is shown.</span>
        ShowProximityLamp<span class="typesection">(1, 1) matlab.lang.OnOffSwitchState </span>= <span class="string">"on"</span>
    <span class="keyword">end</span> <span class="comment">% properties</span>

    <span class="keyword">properties</span> ( SetAccess = private )
        <span class="comment">% Blips on the scope.</span>
        Blips<span class="typesection">(:, 1) Blip</span>
    <span class="keyword">end</span> <span class="comment">% properties ( SetAccess = private )</span>

    <span class="keyword">properties</span> ( Access = private )
        <span class="comment">% Grid layout.</span>
        GridLayout<span class="typesection">(:, 1) matlab.ui.container.GridLayout </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Chart's polar axes.</span>
        Axes<span class="typesection">(:, 1) matlab.graphics.axis.PolarAxes {mustBeScalarOrEmpty}</span>
        <span class="comment">% Text label.</span>
        Label<span class="typesection">(:, 1) matlab.ui.control.Label {mustBeScalarOrEmpty}</span>
        <span class="comment">% Proximity status lamp.</span>
        Lamp<span class="typesection">(:, 1) matlab.ui.control.Lamp {mustBeScalarOrEmpty}</span>
        <span class="comment">% Blip position listener.</span>
        BlipPositionListeners<span class="typesection">(:, 1) event.proplistener</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Access = private )</span>

    <span class="keyword">properties</span> ( Constant, Hidden )
        <span class="comment">% Product dependencies.</span>
        Dependencies<span class="typesection">(1, :) string </span>= <span class="string">"MATLAB"</span>
        <span class="comment">% Description.</span>
        ShortDescription<span class="typesection">(1, 1) string </span>= <span class="string">"Plot a set of blips on a "</span> + <span class="keyword">...</span>
            <span class="string">"radar scope and issue proximity alerts"</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Constant, Hidden )</span>

    <span class="keyword">events</span> ( NotifyAccess = private, HasCallbackProperty )
        <span class="comment">% Blips have been detected in close proximity.</span>
        NearbyBlipsDetected
    <span class="keyword">end</span> <span class="comment">% events ( NotifyAccess = private, HasCallbackProperty )</span>

    <span class="keyword">methods</span>

        <span class="keyword">function</span> obj = RadarScope( namedArgs )
            <span class="comment">%RADARSCOPE Construct a RadarScope object, given optional</span>
            <span class="comment">%name-value arguments.</span>

            <span class="keyword">arguments</span> ( Input )
                namedArgs.?RadarScope
            <span class="keyword">end</span> <span class="comment">% arguments ( Input )</span>

            <span class="comment">% Set any user-defined properties.</span>
            set( obj, namedArgs )

        <span class="keyword">end</span> <span class="comment">% constructor</span>

        <span class="keyword">function</span> varargout = title( obj, varargin )
            <span class="comment">%TITLE Customize the chart title.</span>

            [varargout{1:nargout}] = title( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% title</span>

        <span class="keyword">function</span> varargout = subtitle( obj, varargin )
            <span class="comment">%SUBTITLE Customize the chart subtitle.</span>

            [varargout{1:nargout}] = subtitle( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% subtitle</span>

        <span class="keyword">function</span> grid( obj, varargin )
            <span class="comment">%TITLE Customize the chart grid.</span>

            grid( obj.Axes, varargin{:} )

        <span class="keyword">end</span> <span class="comment">% grid</span>

        <span class="keyword">function</span> addBlip( obj, blip )
            <span class="comment">%ADDBLIP Add a blip to the scope.</span>

            <span class="keyword">arguments</span> ( Input )
                obj<span class="typesection">(1, 1) RadarScope</span>
                blip<span class="typesection">(1, 1) Blip</span>
            <span class="keyword">end</span> <span class="comment">% arguments ( Input )</span>

            <span class="keyword">if</span> ~ismember( blip, obj.Blips )
                <span class="comment">% Parent the blip to the polar axes.</span>
                blip.Parent = obj.Axes;
                <span class="comment">% Store a reference to the blip in the scope.</span>
                obj.Blips(end+1, 1) = blip;
                <span class="comment">% Update the position listeners.</span>
                weakObj = matlab.lang.WeakReference( obj );
                callback = @( varargin ) weakObj.Handle<span class="keyword">...</span>
                    .onBlipPositionChanged( varargin{:} );
                obj.BlipPositionListeners(end+1, 1) = <span class="keyword">...</span>
                    listener( obj.Blips(end), <span class="keyword">...</span>
                    <span class="string">"Position"</span>, <span class="string">"PostSet"</span>, callback );
                <span class="comment">% Update the proximity status.</span>
                obj.onBlipPositionChanged()
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% addBlip</span>

        <span class="keyword">function</span> removeBlip( obj, blip, newBlipParent )
            <span class="comment">%REMOVEBLIP Remove a blip from the scope.</span>

            <span class="keyword">arguments</span> ( Input )
                obj<span class="typesection">(1, 1) RadarScope</span>
                blip<span class="typesection">(1, 1) Blip</span>
                newBlipParent = []
            <span class="keyword">end</span> <span class="comment">% arguments ( Input )</span>

            <span class="comment">% Check whether the blip is on the scope.</span>
            [blipOnScope, blipIdx] = ismember( blip, obj.Blips );

            <span class="comment">% If it is, remove and unregister it.</span>
            <span class="keyword">if</span> blipOnScope
                <span class="comment">% Unparent the blip from the scope.</span>
                obj.Blips(blipIdx).Parent = newBlipParent;
                <span class="comment">% Update the blip list.</span>
                obj.Blips(blipIdx) = [];
                <span class="comment">% Update the position listener.</span>
                delete( obj.BlipPositionListeners(blipIdx) )
                obj.BlipPositionListeners(blipIdx) = [];
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% removeBlip</span>

        <span class="keyword">function</span> varargout = thetaticks( obj, varargin )

            [varargout{1:nargout}] = thetaticks( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% thetaticks</span>

        <span class="keyword">function</span> varargout = thetaticklabels( obj, varargin )

            [varargout{1:nargout}] = thetaticklabels( <span class="keyword">...</span>
                obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% thetaticklabels</span>

        <span class="keyword">function</span> varargout = rticks( obj, varargin )

            [varargout{1:nargout}] = rticks( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% rticks</span>

        <span class="keyword">function</span> varargout = rticklabels( obj, varargin )

            [varargout{1:nargout}] = rticklabels( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% rticklabels</span>

        <span class="keyword">function</span> varargout = rlabel( obj, labelText, namedArgs )

            <span class="keyword">arguments</span> ( Input )
                obj<span class="typesection">(1, 1) RadarScope</span>
                labelText<span class="typesection">(1, 1) string</span>
                namedArgs.?matlab.graphics.primitive.Text
            <span class="keyword">end</span> <span class="comment">% arguments ( Input )</span>

            <span class="comment">% Check the number of outputs.</span>
            nargoutchk( 0, 1 )

            <span class="comment">% Set the label text and any name-value pairs.</span>
            label = obj.Axes.ThetaAxis.Label;
            label.String = labelText;
            set( label, namedArgs )

            <span class="comment">% Return the label if requested.</span>
            <span class="keyword">if</span> nargout == 1
                varargout{1} = label;
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% rlabel</span>

        <span class="keyword">function</span> varargout = thetalabel( obj, labelText, namedArgs )

            <span class="keyword">arguments</span> ( Input )
                obj<span class="typesection">(1, 1) RadarScope</span>
                labelText<span class="typesection">(1, 1) string</span>
                namedArgs.?matlab.graphics.primitive.Text
            <span class="keyword">end</span> <span class="comment">% arguments ( Input )</span>

            <span class="comment">% Check the number of outputs.</span>
            nargoutchk( 0, 1 )

            <span class="comment">% Set the label text and any name-value pairs.</span>
            label = obj.Axes.RAxis.Label;
            label.String = labelText;
            set( label, namedArgs )

            <span class="comment">% Return the label if requested.</span>
            <span class="keyword">if</span> nargout == 1
                varargout{1} = label;
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% thetalabel</span>

    <span class="keyword">end</span> <span class="comment">% methods</span>

    <span class="keyword">methods</span> ( Access = protected )

        <span class="keyword">function</span> setup( obj )
            <span class="comment">%SETUP Initialize the component's graphics.</span>

            <span class="comment">% Create a grid for the chart components.</span>
            obj.GridLayout = uigridlayout( <span class="string">"Parent"</span>, obj, <span class="keyword">...</span>
                <span class="string">"ColumnWidth"</span>, <span class="string">"1x"</span>, <span class="keyword">...</span>
                <span class="string">"RowHeight"</span>, [<span class="string">"1x"</span>, <span class="string">"fit"</span>, <span class="string">"fit"</span>], <span class="keyword">...</span>
                <span class="string">"BackgroundColor"</span>, <span class="string">"k"</span> );

            <span class="comment">% Create the polar axes.</span>
            obj.Axes = polaraxes( <span class="string">"Parent"</span>, obj.GridLayout, <span class="keyword">...</span>
                <span class="string">"Color"</span>, <span class="string">"k"</span>, <span class="keyword">...</span>
                <span class="string">"Interactions"</span>, [], <span class="keyword">...</span>
                <span class="string">"Toolbar"</span>, [], <span class="keyword">...</span>
                <span class="string">"RTick"</span>, 0:10:100, <span class="keyword">...</span>
                <span class="string">"RLim"</span>, [0, 100], <span class="keyword">...</span>
                <span class="string">"ThetaZeroLocation"</span>, <span class="string">"top"</span>, <span class="keyword">...</span>
                <span class="string">"ThetaDir"</span>, <span class="string">"clockwise"</span>, <span class="keyword">...</span>
                <span class="string">"ThetaTick"</span>, 0:15:360, <span class="keyword">...</span>
                <span class="string">"LineWidth"</span>, 2, <span class="keyword">...</span>
                <span class="string">"GridAlpha"</span>, 0.25 );

            <span class="comment">% Apply some default annotations.</span>
            obj.Axes.RAxis.Label.String = <span class="string">"Range (miles)"</span>;
            obj.Axes.ThetaAxis.Label.String = <span class="string">"Bearing"</span>;
            thetatickformat( obj.Axes, <span class="string">"degrees"</span> )
            title( obj.Axes, <span class="string">"Radar Scope"</span> )

            <span class="comment">% Add a static label, and the status lamp.</span>
            obj.Label = uilabel( <span class="string">"Parent"</span>, obj.GridLayout, <span class="keyword">...</span>
                <span class="string">"Text"</span>, <span class="string">"Proximity Status"</span>, <span class="keyword">...</span>
                <span class="string">"FontWeight"</span>, <span class="string">"bold"</span>, <span class="keyword">...</span>
                <span class="string">"HorizontalAlignment"</span>, <span class="string">"center"</span> );
            obj.Lamp = uilamp( <span class="string">"Parent"</span>, obj.GridLayout, <span class="keyword">...</span>
                <span class="string">"Color"</span>, <span class="string">"g"</span> );

        <span class="keyword">end</span> <span class="comment">% setup</span>

        <span class="keyword">function</span> update( obj )
            <span class="comment">%UPDATE Refresh the component's graphics.</span>

            <span class="comment">% Update the scope colors.</span>
            set( obj.Axes, <span class="string">"RColor"</span>, obj.BackdropColor, <span class="keyword">...</span>
                <span class="string">"ThetaColor"</span>, obj.BackdropColor, <span class="keyword">...</span>
                <span class="string">"LineWidth"</span>, obj.GridLineWidth, <span class="keyword">...</span>
                <span class="string">"GridAlpha"</span>, obj.GridAlpha )
            obj.Axes.Title.Color = obj.BackdropColor;
            obj.Label.FontColor = obj.BackdropColor;

            <span class="keyword">if</span> obj.ShowProximityLamp
                obj.GridLayout.RowHeight = [<span class="string">"1x"</span>, <span class="string">"fit"</span>, <span class="string">"fit"</span>];
            <span class="keyword">else</span>
                obj.GridLayout.RowHeight = [<span class="string">"1x"</span>, <span class="string">"0x"</span>, <span class="string">"0x"</span>];
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% update</span>

    <span class="keyword">end</span> <span class="comment">% methods ( Access = protected )</span>

    <span class="keyword">methods</span> ( Access = private )

        <span class="keyword">function</span> onBlipPositionChanged( obj, ~, ~ )
            <span class="comment">%ONBLIPPOSITIONCHANGED Respond to changes in the position of</span>
            <span class="comment">%blips on the scope.</span>

            <span class="comment">% Compute the pairwise blip distances.</span>
            blipPos = vertcat( obj.Blips.Position );
            blipDist = squareform( <span class="keyword">...</span>
                sqrt( pdist( blipPos, @polarDistance ) ) );

            <span class="comment">% Identify the indices of the pairs of nearby blips.</span>
            numBlips = numel( obj.Blips );
            linIdx = find( blipDist &lt; 10 &amp; blipDist &gt; 0 );
            [row, col] = ind2sub( [numBlips, numBlips], linIdx );
            nearbyBlipIdx = union( row, col );
            distantBlipIdx = setdiff( 1:numBlips, nearbyBlipIdx );

            <span class="comment">% Update the blips and the lamp.</span>
            set( obj.Blips(nearbyBlipIdx), <span class="string">"Color"</span>, <span class="string">"r"</span> )
            set( obj.Blips(distantBlipIdx), <span class="string">"Color"</span>, obj.BlipColor )
            <span class="keyword">if</span> any( linIdx )
                obj.notify( <span class="string">"NearbyBlipsDetected"</span> )
                obj.Lamp.Color = <span class="string">"r"</span>;
            <span class="keyword">else</span>
                obj.Lamp.Color = obj.BackdropColor;
            <span class="keyword">end</span> <span class="comment">% if</span>

        <span class="keyword">end</span> <span class="comment">% onBlipPositionChanged</span>

    <span class="keyword">end</span> <span class="comment">% methods ( Access = private )</span>

<span class="keyword">end</span> <span class="comment">% classdef</span>
</pre>
</div>
<!--
##### SOURCE BEGIN #####
classdef RadarScope < Component
    %RADARSCOPE Component managing a radar scope and a set of blips
    %representing objects detected on the scope.

    % Copyright 2021-2025 The MathWorks, Inc.

    properties
        % Backdrop color.
        BackdropColor {validatecolor} = [0.6, 1, 0]
        % Blip color.
        BlipColor {validatecolor} = [1, 1, 1]
        % Grid line width.
        GridLineWidth(1, 1) double {mustBePositive, mustBeFinite} = 1.5
        % Grid line transparency.
        GridAlpha(1, 1) double {mustBeInRange( GridAlpha, 0, 1 )} = 0.25
        % Specify whether the lamp is shown.
        ShowProximityLamp(1, 1) matlab.lang.OnOffSwitchState = "on"
    end % properties

    properties ( SetAccess = private )
        % Blips on the scope.
        Blips(:, 1) Blip
    end % properties ( SetAccess = private )

    properties ( Access = private )
        % Grid layout.
        GridLayout(:, 1) matlab.ui.container.GridLayout ...
            {mustBeScalarOrEmpty}
        % Chart's polar axes.
        Axes(:, 1) matlab.graphics.axis.PolarAxes {mustBeScalarOrEmpty}
        % Text label.
        Label(:, 1) matlab.ui.control.Label {mustBeScalarOrEmpty}
        % Proximity status lamp.
        Lamp(:, 1) matlab.ui.control.Lamp {mustBeScalarOrEmpty}
        % Blip position listener.
        BlipPositionListeners(:, 1) event.proplistener
    end % properties ( Access = private )

    properties ( Constant, Hidden )
        % Product dependencies.
        Dependencies(1, :) string = "MATLAB"
        % Description.
        ShortDescription(1, 1) string = "Plot a set of blips on a " + ...
            "radar scope and issue proximity alerts"
    end % properties ( Constant, Hidden )

    events ( NotifyAccess = private, HasCallbackProperty )
        % Blips have been detected in close proximity.
        NearbyBlipsDetected
    end % events ( NotifyAccess = private, HasCallbackProperty )

    methods

        function obj = RadarScope( namedArgs )
            %RADARSCOPE Construct a RadarScope object, given optional
            %name-value arguments.

            arguments ( Input )
                namedArgs.?RadarScope
            end % arguments ( Input )

            % Set any user-defined properties.
            set( obj, namedArgs )

        end % constructor

        function varargout = title( obj, varargin )
            %TITLE Customize the chart title.

            [varargout{1:nargout}] = title( obj.Axes, varargin{:} );

        end % title

        function varargout = subtitle( obj, varargin )
            %SUBTITLE Customize the chart subtitle.

            [varargout{1:nargout}] = subtitle( obj.Axes, varargin{:} );

        end % subtitle

        function grid( obj, varargin )
            %TITLE Customize the chart grid.

            grid( obj.Axes, varargin{:} )

        end % grid

        function addBlip( obj, blip )
            %ADDBLIP Add a blip to the scope.

            arguments ( Input )
                obj(1, 1) RadarScope
                blip(1, 1) Blip
            end % arguments ( Input )

            if ~ismember( blip, obj.Blips )
                % Parent the blip to the polar axes.
                blip.Parent = obj.Axes;
                % Store a reference to the blip in the scope.
                obj.Blips(end+1, 1) = blip;
                % Update the position listeners.
                weakObj = matlab.lang.WeakReference( obj );
                callback = @( varargin ) weakObj.Handle...
                    .onBlipPositionChanged( varargin{:} );
                obj.BlipPositionListeners(end+1, 1) = ...
                    listener( obj.Blips(end), ...
                    "Position", "PostSet", callback );
                % Update the proximity status.
                obj.onBlipPositionChanged()
            end % if

        end % addBlip

        function removeBlip( obj, blip, newBlipParent )
            %REMOVEBLIP Remove a blip from the scope.

            arguments ( Input )
                obj(1, 1) RadarScope
                blip(1, 1) Blip
                newBlipParent = []
            end % arguments ( Input )

            % Check whether the blip is on the scope.
            [blipOnScope, blipIdx] = ismember( blip, obj.Blips );

            % If it is, remove and unregister it.
            if blipOnScope
                % Unparent the blip from the scope.
                obj.Blips(blipIdx).Parent = newBlipParent;
                % Update the blip list.
                obj.Blips(blipIdx) = [];
                % Update the position listener.
                delete( obj.BlipPositionListeners(blipIdx) )
                obj.BlipPositionListeners(blipIdx) = [];
            end % if

        end % removeBlip

        function varargout = thetaticks( obj, varargin )

            [varargout{1:nargout}] = thetaticks( obj.Axes, varargin{:} );

        end % thetaticks

        function varargout = thetaticklabels( obj, varargin )

            [varargout{1:nargout}] = thetaticklabels( ...
                obj.Axes, varargin{:} );

        end % thetaticklabels

        function varargout = rticks( obj, varargin )

            [varargout{1:nargout}] = rticks( obj.Axes, varargin{:} );

        end % rticks

        function varargout = rticklabels( obj, varargin )

            [varargout{1:nargout}] = rticklabels( obj.Axes, varargin{:} );

        end % rticklabels

        function varargout = rlabel( obj, labelText, namedArgs )

            arguments ( Input )
                obj(1, 1) RadarScope
                labelText(1, 1) string
                namedArgs.?matlab.graphics.primitive.Text
            end % arguments ( Input )

            % Check the number of outputs.
            nargoutchk( 0, 1 )

            % Set the label text and any name-value pairs.
            label = obj.Axes.ThetaAxis.Label;
            label.String = labelText;
            set( label, namedArgs )

            % Return the label if requested.
            if nargout == 1
                varargout{1} = label;
            end % if

        end % rlabel

        function varargout = thetalabel( obj, labelText, namedArgs )

            arguments ( Input )
                obj(1, 1) RadarScope
                labelText(1, 1) string
                namedArgs.?matlab.graphics.primitive.Text
            end % arguments ( Input )

            % Check the number of outputs.
            nargoutchk( 0, 1 )

            % Set the label text and any name-value pairs.
            label = obj.Axes.RAxis.Label;
            label.String = labelText;
            set( label, namedArgs )

            % Return the label if requested.
            if nargout == 1
                varargout{1} = label;
            end % if

        end % thetalabel

    end % methods

    methods ( Access = protected )

        function setup( obj )
            %SETUP Initialize the component's graphics.

            % Create a grid for the chart components.
            obj.GridLayout = uigridlayout( "Parent", obj, ...
                "ColumnWidth", "1x", ...
                "RowHeight", ["1x", "fit", "fit"], ...
                "BackgroundColor", "k" );

            % Create the polar axes.
            obj.Axes = polaraxes( "Parent", obj.GridLayout, ...
                "Color", "k", ...
                "Interactions", [], ...
                "Toolbar", [], ...
                "RTick", 0:10:100, ...
                "RLim", [0, 100], ...
                "ThetaZeroLocation", "top", ...
                "ThetaDir", "clockwise", ...
                "ThetaTick", 0:15:360, ...
                "LineWidth", 2, ...
                "GridAlpha", 0.25 );

            % Apply some default annotations.
            obj.Axes.RAxis.Label.String = "Range (miles)";
            obj.Axes.ThetaAxis.Label.String = "Bearing";
            thetatickformat( obj.Axes, "degrees" )
            title( obj.Axes, "Radar Scope" )

            % Add a static label, and the status lamp.
            obj.Label = uilabel( "Parent", obj.GridLayout, ...
                "Text", "Proximity Status", ...
                "FontWeight", "bold", ...
                "HorizontalAlignment", "center" );
            obj.Lamp = uilamp( "Parent", obj.GridLayout, ...
                "Color", "g" );

        end % setup

        function update( obj )
            %UPDATE Refresh the component's graphics.

            % Update the scope colors.
            set( obj.Axes, "RColor", obj.BackdropColor, ...
                "ThetaColor", obj.BackdropColor, ...
                "LineWidth", obj.GridLineWidth, ...
                "GridAlpha", obj.GridAlpha )
            obj.Axes.Title.Color = obj.BackdropColor;
            obj.Label.FontColor = obj.BackdropColor;

            if obj.ShowProximityLamp
                obj.GridLayout.RowHeight = ["1x", "fit", "fit"];
            else
                obj.GridLayout.RowHeight = ["1x", "0x", "0x"];
            end % if

        end % update

    end % methods ( Access = protected )

    methods ( Access = private )

        function onBlipPositionChanged( obj, ~, ~ )
            %ONBLIPPOSITIONCHANGED Respond to changes in the position of
            %blips on the scope.

            % Compute the pairwise blip distances.
            blipPos = vertcat( obj.Blips.Position );
            blipDist = squareform( ...
                sqrt( pdist( blipPos, @polarDistance ) ) );

            % Identify the indices of the pairs of nearby blips.
            numBlips = numel( obj.Blips );
            linIdx = find( blipDist < 10 & blipDist > 0 );
            [row, col] = ind2sub( [numBlips, numBlips], linIdx );
            nearbyBlipIdx = union( row, col );
            distantBlipIdx = setdiff( 1:numBlips, nearbyBlipIdx );

            % Update the blips and the lamp.
            set( obj.Blips(nearbyBlipIdx), "Color", "r" )
            set( obj.Blips(distantBlipIdx), "Color", obj.BlipColor )
            if any( linIdx )
                obj.notify( "NearbyBlipsDetected" )
                obj.Lamp.Color = "r";
            else
                obj.Lamp.Color = obj.BackdropColor;
            end % if

        end % onBlipPositionChanged

    end % methods ( Access = private )

end % classdef
##### SOURCE END #####
-->
</body>
</html>
