<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>AircraftChart</title>
<meta name="generator" content="MATLAB 25.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2025-01-11">
<meta name="DC.source" content="AircraftChart.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<pre class="codeinput">
<span class="keyword">classdef</span> AircraftChart &lt; Chart
    <span class="comment">%AIRCRAFTCHART Custom chart for displaying a 3D rendering of an</span>
    <span class="comment">%aircraft. The chart also provides roll, pitch and yaw methods for</span>
    <span class="comment">%modifying the attitude of the aircraft.</span>

    <span class="comment">% Copyright 2024-2025 The MathWorks, Inc.</span>

    <span class="keyword">properties</span>
        <span class="comment">% Aircraft triangulation coordinate data.</span>
        Triangulation<span class="typesection">(:, 3) triangulation </span>= defaultAircraft()
    <span class="keyword">end</span> <span class="comment">% properties</span>

    <span class="keyword">properties</span> ( Access = private, Transient, NonCopyable )
        <span class="comment">% Chart axes.</span>
        Axes<span class="typesection">(:, 1) matlab.graphics.axis.Axes {mustBeScalarOrEmpty}</span>
        <span class="comment">% Transform object.</span>
        Transform<span class="typesection">(:, 1) matlab.graphics.primitive.Transform </span><span class="keyword">...</span>
            <span class="typesection">{mustBeScalarOrEmpty}</span>
        <span class="comment">% Patch object for the aircraft.</span>
        Patch<span class="typesection">(:, 1) matlab.graphics.primitive.Patch {mustBeScalarOrEmpty}</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Access = private, Transient, NonCopyable )</span>

    <span class="keyword">properties</span> ( Constant, Hidden )
        <span class="comment">% Product dependencies.</span>
        Dependencies<span class="typesection">(1, :) string </span>= <span class="string">"MATLAB"</span>
        <span class="comment">% Description.</span>
        ShortDescription<span class="typesection">(1, 1) string </span>= <span class="string">"Visualize an aircraft and "</span> + <span class="keyword">...</span>
            <span class="string">"modify its roll, pitch, and yaw"</span>
    <span class="keyword">end</span> <span class="comment">% properties ( Constant, Hidden )</span>

    <span class="keyword">methods</span>

        <span class="keyword">function</span> obj = AircraftChart( namedArgs )

            <span class="keyword">arguments</span> ( Input )
                namedArgs.?AircraftChart
            <span class="keyword">end</span> <span class="comment">% arguments</span>

            <span class="comment">% Set any user-defined properties.</span>
            set( obj, namedArgs )

        <span class="keyword">end</span> <span class="comment">% constructor</span>

        <span class="keyword">function</span> roll( obj, theta )
            <span class="comment">%ROLL Roll the aircraft by theta degrees.</span>

            obj.rotate( <span class="string">"roll"</span>, theta )

        <span class="keyword">end</span> <span class="comment">% roll</span>

        <span class="keyword">function</span> pitch( obj, theta )
            <span class="comment">%PITCH Pitch the aircraft by theta degrees.</span>

            obj.rotate( <span class="string">"pitch"</span>, theta )

        <span class="keyword">end</span> <span class="comment">% pitch</span>

        <span class="keyword">function</span> yaw( obj, theta )
            <span class="comment">%YAW Yaw the aircraft by theta degrees.</span>

            obj.rotate( <span class="string">"yaw"</span>, theta )

        <span class="keyword">end</span> <span class="comment">% yaw</span>

        <span class="keyword">function</span> reset( obj )
            <span class="comment">%RESET Restore the original aircraft pose.</span>

            obj.Transform.Matrix = eye( 4 );

        <span class="keyword">end</span> <span class="comment">% reset</span>

        <span class="keyword">function</span> varargout = title( obj, varargin )
            <span class="comment">%TITLE Add the specified title to the aircraft chart.</span>

            [varargout{1:nargout}] = title( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% title</span>

        <span class="keyword">function</span> box( obj, varargin )
            <span class="comment">%BOX Control chart axes box.</span>

            box( obj.Axes, varargin{:} )

        <span class="keyword">end</span> <span class="comment">% box</span>

        <span class="keyword">function</span> varargout = view( obj, varargin )
            <span class="comment">%VIEW Camera line of sight.</span>

            [varargout{1:nargout}] = view( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% view</span>

        <span class="keyword">function</span> varargout = axis( obj, varargin )
            <span class="comment">%AXIS Set axis limits and aspect ratios.</span>

            [varargout{1:nargout}] = axis( obj.Axes, varargin{:} );

        <span class="keyword">end</span> <span class="comment">% axis</span>

    <span class="keyword">end</span> <span class="comment">% methods</span>

    <span class="keyword">methods</span> ( Access = protected )

        <span class="keyword">function</span> setup( obj )
            <span class="comment">%SETUP Initialize the chart graphics.</span>

            <span class="comment">% Obtain the chart's tiled layout.</span>
            tl = obj.getLayout();

            <span class="comment">% Define the color scheme used for the aircraft.</span>
            blue = [0, 0.447, 0.741];
            gray = 0.95 * ones(1, 3);
            onesMatrix = ones(250, 3);
            paintJob = [gray .* onesMatrix; blue .* onesMatrix];

            <span class="comment">% Create and customize the axes.</span>
            x = [-2000, 2000];
            y = [-2500, 4500];
            z = [-2500, 2500];
            obj.Axes = axes( <span class="string">"Parent"</span>, tl, <span class="keyword">...</span>
                <span class="string">"Colormap"</span>, paintJob, <span class="keyword">...</span>
                <span class="string">"View"</span>, [225, 25], <span class="keyword">...</span>
                <span class="string">"DataAspectRatio"</span>, [1, 1, 1], <span class="keyword">...</span>
                <span class="string">"XLim"</span>, x, <span class="keyword">...</span>
                <span class="string">"YLim"</span>, y, <span class="keyword">...</span>
                <span class="string">"ZLim"</span>, z, <span class="keyword">...</span>
                <span class="string">"XTickLabel"</span>, [], <span class="keyword">...</span>
                <span class="string">"YTickLabel"</span>, [], <span class="keyword">...</span>
                <span class="string">"ZTickLabel"</span>, [], <span class="keyword">...</span>
                <span class="string">"NextPlot"</span>, <span class="string">"add"</span>);

            <span class="comment">% Add the transform and patch.</span>
            obj.Transform = hgtransform( <span class="string">"Parent"</span>, obj.Axes );
            obj.Patch = trisurf( obj.Triangulation, <span class="keyword">...</span>
                <span class="string">"Parent"</span>, obj.Transform, <span class="keyword">...</span>
                <span class="string">"FaceAlpha"</span>, 0.9, <span class="keyword">...</span>
                <span class="string">"FaceColor"</span>, <span class="string">"interp"</span>, <span class="keyword">...</span>
                <span class="string">"EdgeAlpha"</span>, 0, <span class="keyword">...</span>
                <span class="string">"FaceLighting"</span>, <span class="string">"gouraud"</span> );

            <span class="comment">% Add a title, lighting from above, and give the patch a shiny</span>
            <span class="comment">% appearance by adjusting lighting properties.</span>
            title( obj.Axes, <span class="string">"Aircraft Attitude"</span> )
            light( obj.Axes, <span class="string">"Position"</span>, [0, 0, 1] )
            material( obj.Axes, <span class="string">"shiny"</span> )

        <span class="keyword">end</span> <span class="comment">% setup</span>

        <span class="keyword">function</span> update( obj )
            <span class="comment">%UPDATE Refresh the chart graphics.</span>

            faces = obj.Triangulation(:, :);
            pts = obj.Triangulation.Points;
            set( obj.Patch, <span class="string">"Faces"</span>, faces, <span class="keyword">...</span>
                <span class="string">"Vertices"</span>, pts, <span class="keyword">...</span>
                <span class="string">"FaceVertexCData"</span>, pts(:, 3) )

        <span class="keyword">end</span> <span class="comment">% update</span>

    <span class="keyword">end</span> <span class="comment">% methods ( Access = protected )</span>

    <span class="keyword">methods</span> ( Access = private )

        <span class="keyword">function</span> rotate( obj, type, theta )
            <span class="comment">%ROTATE Rotate the aircraft with respect to one of three</span>
            <span class="comment">%orientations (roll, pitch, yaw) by an angle theta.</span>

            <span class="keyword">arguments</span>
                <span class="comment">% Chart object.</span>
                obj<span class="typesection">(1, 1) AircraftChart</span>
                <span class="comment">% Possible angles of rotation: roll, pitch and yaw.</span>
                type<span class="typesection">(1, 1) string </span><span class="keyword">...</span>
                    <span class="typesection">{mustBeMember( type, ["roll", "pitch", "yaw"] )}</span>
                <span class="comment">% Angular value to rotate by.</span>
                theta<span class="typesection">(1, 1) double {mustBeReal, mustBeFinite}</span> = 0
            <span class="keyword">end</span> <span class="comment">% arguments</span>

            <span class="keyword">switch</span> type
                <span class="keyword">case</span> <span class="string">"roll"</span>
                    rotAxis = <span class="string">"y"</span>;
                <span class="keyword">case</span> <span class="string">"pitch"</span>
                    rotAxis = <span class="string">"x"</span>;
                <span class="keyword">case</span> <span class="string">"yaw"</span>
                    rotAxis = <span class="string">"z"</span>;
            <span class="keyword">end</span> <span class="comment">% switch/case</span>

            <span class="comment">% Convert the angle to radians and then update the</span>
            <span class="comment">% transformation matrix.</span>
            theta = deg2rad( theta );
            obj.Transform.Matrix = obj.Transform.Matrix * <span class="keyword">...</span>
                makehgtform( rotAxis + <span class="string">"rotate"</span>, theta );

        <span class="keyword">end</span> <span class="comment">% rotate</span>

    <span class="keyword">end</span> <span class="comment">% methods ( Access = private )</span>

<span class="keyword">end</span> <span class="comment">% classdef</span>

<span class="keyword">function</span> tr = defaultAircraft()
<span class="comment">%DEFAULTAIRCRAFT Import an aircraft triangulation.</span>

<span class="keyword">arguments</span> ( Output )
    tr<span class="typesection">(:, 3) triangulation</span>
<span class="keyword">end</span> <span class="comment">% arguments ( Output )</span>

<span class="comment">% Import the triangulation.</span>
<span class="comment">% Reference:</span>
<span class="comment">% Airplane by Yorchmur, https://www.printables.com/model/34767-airplane,</span>
<span class="comment">% licensed under the Creative Commons Attribution 4.0 International</span>
<span class="comment">% License.</span>
url = <span class="string">"https://files.printables.com/media/prints/34767/stls/"</span> + <span class="keyword">...</span>
    <span class="string">"343468_b085a064-c28f-4861-b1a0-6a559929a7e2/avion31.stl"</span>;
opts = weboptions( <span class="string">"ContentReader"</span>, @stlread );
tr = webread(url, opts);

<span class="keyword">end</span> <span class="comment">% defaultAircraft</span>
</pre>
</div>
<!--
##### SOURCE BEGIN #####
classdef AircraftChart < Chart
    %AIRCRAFTCHART Custom chart for displaying a 3D rendering of an
    %aircraft. The chart also provides roll, pitch and yaw methods for
    %modifying the attitude of the aircraft.

    % Copyright 2024-2025 The MathWorks, Inc.

    properties
        % Aircraft triangulation coordinate data.
        Triangulation(:, 3) triangulation = defaultAircraft()
    end % properties

    properties ( Access = private, Transient, NonCopyable )
        % Chart axes.
        Axes(:, 1) matlab.graphics.axis.Axes {mustBeScalarOrEmpty}
        % Transform object.
        Transform(:, 1) matlab.graphics.primitive.Transform ...
            {mustBeScalarOrEmpty}
        % Patch object for the aircraft.
        Patch(:, 1) matlab.graphics.primitive.Patch {mustBeScalarOrEmpty}
    end % properties ( Access = private, Transient, NonCopyable )

    properties ( Constant, Hidden )
        % Product dependencies.
        Dependencies(1, :) string = "MATLAB"
        % Description.
        ShortDescription(1, 1) string = "Visualize an aircraft and " + ...
            "modify its roll, pitch, and yaw"
    end % properties ( Constant, Hidden )

    methods

        function obj = AircraftChart( namedArgs )

            arguments ( Input )
                namedArgs.?AircraftChart
            end % arguments            
            
            % Set any user-defined properties.
            set( obj, namedArgs )

        end % constructor

        function roll( obj, theta )
            %ROLL Roll the aircraft by theta degrees.

            obj.rotate( "roll", theta )

        end % roll

        function pitch( obj, theta )
            %PITCH Pitch the aircraft by theta degrees.

            obj.rotate( "pitch", theta )

        end % pitch

        function yaw( obj, theta )
            %YAW Yaw the aircraft by theta degrees.

            obj.rotate( "yaw", theta )

        end % yaw

        function reset( obj )
            %RESET Restore the original aircraft pose.

            obj.Transform.Matrix = eye( 4 );

        end % reset

        function varargout = title( obj, varargin )
            %TITLE Add the specified title to the aircraft chart.

            [varargout{1:nargout}] = title( obj.Axes, varargin{:} );

        end % title

        function box( obj, varargin )
            %BOX Control chart axes box.

            box( obj.Axes, varargin{:} )

        end % box

        function varargout = view( obj, varargin )
            %VIEW Camera line of sight.

            [varargout{1:nargout}] = view( obj.Axes, varargin{:} );

        end % view

        function varargout = axis( obj, varargin )
            %AXIS Set axis limits and aspect ratios.

            [varargout{1:nargout}] = axis( obj.Axes, varargin{:} );

        end % axis

    end % methods

    methods ( Access = protected )

        function setup( obj )
            %SETUP Initialize the chart graphics.

            % Obtain the chart's tiled layout.
            tl = obj.getLayout();

            % Define the color scheme used for the aircraft.
            blue = [0, 0.447, 0.741];
            gray = 0.95 * ones(1, 3);
            onesMatrix = ones(250, 3);
            paintJob = [gray .* onesMatrix; blue .* onesMatrix];

            % Create and customize the axes.
            x = [-2000, 2000];
            y = [-2500, 4500];
            z = [-2500, 2500];
            obj.Axes = axes( "Parent", tl, ...
                "Colormap", paintJob, ...
                "View", [225, 25], ...
                "DataAspectRatio", [1, 1, 1], ...
                "XLim", x, ...
                "YLim", y, ...
                "ZLim", z, ...
                "XTickLabel", [], ...
                "YTickLabel", [], ...
                "ZTickLabel", [], ...
                "NextPlot", "add");

            % Add the transform and patch.
            obj.Transform = hgtransform( "Parent", obj.Axes );
            obj.Patch = trisurf( obj.Triangulation, ...
                "Parent", obj.Transform, ...
                "FaceAlpha", 0.9, ...
                "FaceColor", "interp", ...
                "EdgeAlpha", 0, ...
                "FaceLighting", "gouraud" );

            % Add a title, lighting from above, and give the patch a shiny
            % appearance by adjusting lighting properties.
            title( obj.Axes, "Aircraft Attitude" )
            light( obj.Axes, "Position", [0, 0, 1] )
            material( obj.Axes, "shiny" )

        end % setup

        function update( obj )
            %UPDATE Refresh the chart graphics.

            faces = obj.Triangulation(:, :);
            pts = obj.Triangulation.Points;
            set( obj.Patch, "Faces", faces, ...
                "Vertices", pts, ...
                "FaceVertexCData", pts(:, 3) )

        end % update

    end % methods ( Access = protected )

    methods ( Access = private )

        function rotate( obj, type, theta )
            %ROTATE Rotate the aircraft with respect to one of three
            %orientations (roll, pitch, yaw) by an angle theta.

            arguments
                % Chart object.
                obj(1, 1) AircraftChart
                % Possible angles of rotation: roll, pitch and yaw.
                type(1, 1) string ...
                    {mustBeMember( type, ["roll", "pitch", "yaw"] )}
                % Angular value to rotate by.
                theta(1, 1) double {mustBeReal, mustBeFinite} = 0
            end % arguments

            switch type
                case "roll"
                    rotAxis = "y";
                case "pitch"
                    rotAxis = "x";
                case "yaw"
                    rotAxis = "z";
            end % switch/case

            % Convert the angle to radians and then update the
            % transformation matrix.
            theta = deg2rad( theta );
            obj.Transform.Matrix = obj.Transform.Matrix * ...
                makehgtform( rotAxis + "rotate", theta );

        end % rotate

    end % methods ( Access = private )

end % classdef

function tr = defaultAircraft()
%DEFAULTAIRCRAFT Import an aircraft triangulation.

arguments ( Output )
    tr(:, 3) triangulation
end % arguments ( Output )

% Import the triangulation. 
% Reference:
% Airplane by Yorchmur, https://www.printables.com/model/34767-airplane, 
% licensed under the Creative Commons Attribution 4.0 International 
% License.
url = "https://files.printables.com/media/prints/34767/stls/" + ...
    "343468_b085a064-c28f-4861-b1a0-6a559929a7e2/avion31.stl";
opts = weboptions( "ContentReader", @stlread );
tr = webread(url, opts);

end % defaultAircraft
##### SOURCE END #####
-->
</body>
</html>
